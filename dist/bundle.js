!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var i,s=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),l=[];function d(e){for(var t=-1,n=0;n<l.length;n++)if(l[n].identifier===e){t=n;break}return t}function r(e,t){for(var n={},i=[],s=0;s<e.length;s++){var o=e[s],r=t.base?o[0]+t.base:o[0],a=n[r]||0,c="".concat(r," ").concat(a);n[r]=a+1;var h=d(c),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(l[h].references++,l[h].updater(u)):l.push({identifier:c,updater:_(u,t),references:1}),i.push(c)}return i}function a(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var l=o(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,i){var s=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,s);else{var o=document.createTextNode(s),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function g(e,t,n){var i=n.css,s=n.media,o=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),o&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,m=0;function _(e,t){var n,i,s;if(t.singleton){var o=m++;n=p||(p=a(t)),i=u.bind(null,n,o,!1),s=u.bind(null,n,o,!0)}else n=a(t),i=g.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var n=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var s=d(n[i]);l[s].references--}for(var o=r(e,t),a=0;a<n.length;a++){var c=d(n[a]);0===l[c].references&&(l[c].updater(),l.splice(c,1))}n=o}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var s=(l=i,d=btoa(unescape(encodeURIComponent(JSON.stringify(l)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(d),"/*# ".concat(r," */")),o=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([s]).join("\n")}var l,d,r;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var d=0;d<e.length;d++){var r=[].concat(e[d]);i&&s[r[0]]||(n&&(r[2]?r[2]="".concat(n," and ").concat(r[2]):r[2]=n),t.push(r))}},t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=()=>{let e=window.location.hostname;return window.location.host===window.location.hostname?e+=":80":e+=":"+window.location.host.substring(window.location.hostname.length+1),e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return H})),n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return E}));let i=null;"undefined"!=typeof WebSocket&&(i=WebSocket);var s=i;const o={},l={};var d=e=>{if("string"==typeof e&&(e=JSON.parse(e.normalize().replace(/\\x([0-9A-Fa-f]{2})/g,""))),!e.id&&e.method){const t=l[e.method];t&&Array.isArray(t)&&t.length&&t.forEach(t=>{t(e.params)})}};let r=null;var a=e=>new Promise((t,n)=>{if(r&&1===r.readyState)return t(r);if(r&&0===r.readyState){const e=()=>{r.removeEventListener("open",e),t(r)};return r.addEventListener("open",e)}if(null===r){r=new s((e=>[e&&e.protocol||"ws://",e&&e.host||"localhost",":"+(e&&e.port||80),e&&e.endpoint||"/jsonrpc",e&&e.token?"?token="+e.token:null].join(""))(e),"notification"),r.addEventListener("message",t=>{e.debug&&(console.log(" "),console.log("API REPONSE:"),console.log(JSON.stringify(t.data,null,2)),console.log(" ")),(e=>{if("string"==typeof e&&(e=JSON.parse(e.normalize().replace(/\\x([0-9A-Fa-f]{2})/g,""))),e.id){const t=o[e.id];t?("result"in e?t.resolve(e.result):t.reject(e.error),delete o[e.id]):console.log("no pending request found with id "+e.id)}})(t.data)}),r.addEventListener("message",e=>{d(e.data)}),r.addEventListener("error",()=>{d({method:"client.ThunderJS.events.error"}),r=null});const i=e=>{r=null,n(e)};r.addEventListener("close",i),r.addEventListener("open",()=>{d({method:"client.ThunderJS.events.connect"}),r.removeEventListener("close",i),r.addEventListener("close",()=>{d({method:"client.ThunderJS.events.disconnect"}),r=null}),t(r)})}else r=null,n("Socket error")});let c=0;var h=e=>({request:(t,n,i)=>new Promise((s,l)=>{const d=(c+=1,c),r=((e,t,n)=>{let i;return(i=n&&n.version)?i:e&&(e[t]||e.default)||1})(e.versions,t,i),h=((e,t,n,i,s)=>{i&&delete i.version;const o={jsonrpc:"2.0",id:e,method:[t,s,n].join(".")};return(i||!1===i)&&(("object"!=typeof i||0!==Object.keys(i).length)&&(o.params=i)),o})(d,t,n,i,r);e.debug&&(console.log(" "),console.log("API REQUEST:"),console.log(JSON.stringify(h,null,2)),console.log(" ")),o[d]={body:h,resolve:s,reject:l},((e,t)=>a(e).then(e=>{e.send(JSON.stringify(t))}))(e,h).catch(e=>{l(e)})})}),u={DeviceInfo:{freeRam(e){return this.call("systeminfo",e).then(e=>e.freeram)},version(e){return this.call("systeminfo",e).then(e=>e.version)}}};function g(e,t,n,i){const s=this,o=m.call(this,e,t,n,i);return{dispose(){const n=p(e,t);l[n].splice(o,1),0===l[n].length&&_.call(s,e,t,i)}}}const p=(e,t)=>["client",e,"events",t].join("."),m=function(e,t,n,i){const s=p(e,t);if(!l[s]&&(l[s]=[],"ThunderJS"!==e)){const n="register",o={event:t,id:s.split(".").slice(0,-1).join(".")};this.api.request(e,n,o).catch(e=>{"function"==typeof i&&i(e.message)})}return l[s].push(n),l[s].length-1},_=function(e,t,n){const i=p(e,t);if(delete l[i],"ThunderJS"!==e){const s="unregister",o={event:t,id:i.split(".").slice(0,-1).join(".")};this.api.request(e,s,o).catch(e=>{"function"==typeof n&&n(e.message)})}};let v;const f=e=>({options:e,plugin:!1,call(){const e=[...arguments];this.plugin&&e[0]!==this.plugin&&e.unshift(this.plugin);const t=e[0],n=e[1];return"function"==typeof this[t][n]?this[t][n](e[2]):this.api.request.apply(this,e)},registerPlugin(e,t){this[e]=b(Object.assign(Object.create(f),t,{plugin:e}))},subscribe(){},on(){const e=[...arguments];return-1!==["connect","disconnect","error"].indexOf(e[0])?e.unshift("ThunderJS"):this.plugin&&e[0]!==this.plugin&&e.unshift(this.plugin),g.apply(this,e)},once(){console.log("todo ...")}}),b=e=>new Proxy(e,{get(e,t){const n=e[t];return"api"===t?v:void 0!==n?"function"==typeof n?["on","once","subscribe"].indexOf(t)>-1?function(...e){return n.apply(this,e)}:function(...e){return((e,t)=>{"object"==typeof e&&("object"!=typeof e||e.then&&"function"==typeof e.then)||(e=new Promise((t,n)=>{e instanceof Error==!1?t(e):n(e)}));const n="function"==typeof t[t.length-1]?t[t.length-1]:null;if(!n)return e;e.then(e=>n(null,e)).catch(e=>n(e))})(n.apply(this,e),e)}:"object"==typeof n?b(Object.assign(Object.create(f(e.options)),n,{plugin:t})):n:!1===e.plugin?b(Object.assign(Object.create(f(e.options)),{},{plugin:t})):function(...n){return n.unshift(t),e.call.apply(this,n)}}});var y=e=>(void 0===e.token&&"undefined"!=typeof window&&window.thunder&&"function"==typeof window.thunder.token&&(e.token=window.thunder.token()),v=h(e),b({...f(e),...u}));class x{constructor(e){this.prefixForService="Service",this.mainDiv=document.getElementById("main"),this.socket=null,this.plugins=void 0,this.host=e.split(":"),this.host[1]||(this.host[1]=80),this.t=y({host:this.host[0],port:this.host[1]}),this.socketListeners={},this.servicesAvailableInJsonRPC=["DeviceInfo","DHCPServer","DIALServer","LocationSync","Messenger","Monitor","NetworkControl","OCDM","RemoteControl","Spark","Streamer","SystemCommands","TestController","TestUtility","TimeSync","TraceControl","WebKitBrowser","WifiControl"]}handleRequest(e,t,n,i){var s=new XMLHttpRequest;s.open(e,t,!0),i&&(s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<=299){var e;if(""!==s.responseText)try{e=JSON.parse(s.responseText.replace(/\\x([0-9A-Fa-f]{2})/g,""))}catch(e){}i(null,e,s.status)}else s.status>=300?i(s.responseText,null):0===s.status&&i("Connection interrupted",null)},s.ontimeout=function(){i("Connection timed out",null)}),null!==n?"string"==typeof n||n instanceof String?s.send(n):s.send(JSON.stringify(n)):s.send()}getURLStart(e,t){return e+"://"+this.host[0]+":"+this.host[1]+"/"+this.prefixForService+"/"}req(e,t){return new Promise((n,i)=>{if(t)console.debug(`<JSON> ${t.plugin}.1.${t.method}`,t.params?t.params:""),this.t.call(t.plugin,t.method,t.params).then(e=>{n(e)}).catch(s=>{e?(console.debug(`<JSON> ${t.plugin}.1.${t.method} failed, trying <REST> ${e.method} ${e.path}`),console.debug("<JSON> Error: ",s),this.handleRequest(e.method,this.getURLStart("http")+e.path,e.body,(e,t)=>{e?i(e):n(t)})):(console.error("JSONRPC Error, with no fallback: ",s),i(s))});else{if(void 0===e)return i("No rest or jsonrpc options provided, bailing out");this.handleRequest(e.method,this.getURLStart("http")+e.path,e.body,(e,t)=>{e?i(e):n(t)})}})}getControllerPlugins(){if(void 0!==this.plugins)return Promise.resolve(this.plugins);return this.req({method:"GET",path:"Controller/Plugins"},{plugin:"Controller",method:"status"}).then(e=>(this.plugins=e,e))}startWebShell(e){e(null,new WebSocket(this.getURLStart("ws")+"WebShell","raw"))}startWebSocket(){this.socket&&this.socket.close(),this.socket=new WebSocket(this.getURLStart("ws")+"Controller","notification");var e=this;this.socket.onmessage=function(t){var n={};try{if(void 0===(n=JSON.parse(t.data)).callsign)return;for(var i=0;i<e.socketListeners.length;i++)n.callsign!==e.socketListeners[i].callsign&&"all"!==e.socketListeners[i].callsign||e.socketListeners[i].fn(n)}catch(t){return console.error("SocketNotificationError",t)}},this.socket.onclose=function(t){setTimeout(e.startWebSocket.bind(e),conf.refresh_interval)},this.socket.onerror=function(e){this.socket.close()}}addWebSocketListener(e,t){var n={fn:t,callsign:e};return"function"==typeof t&&-1===this.socketListeners.indexOf(n)&&this.socketListeners.push(n),this.socketListeners.length-1}removeWebSocketListener(e){this.socketListeners[e]&&this.socketListeners.splice(e,1)}}var E={refresh_interval:5e3,cache_period:500,startPlugin:"Controller"};var w=class{constructor(e,t){this.api=t,this.plugins=e,this.top=document.getElementById("top"),this.renderInMenu=!1;var n=document.getElementsByTagName("body")[0];try{document.createEvent("TouchEvent"),this.nav.style.left="-600px",n.classList.remove("desktop"),n.className="touch",this.isTouchDevice=!0}catch(e){}this.top.innerHTML='<div id="header" class="header">\n          <div id="button-left" class="fa fa-bars left"></div>\n        </div>\n\n        \x3c!--navigation--\x3e\n        <div id="menu" class="navigation"></div>\n        ',this.header=document.getElementById("header"),this.nav=document.getElementById("menu");var i=!1,s=new Image;s.alt="Metrological",s.onload=()=>{this.header.appendChild(s)},s.onerror=()=>{!0!==i&&(s.src="UI/img/ml.svg",i=!0)},s.src="img/ml.svg",document.getElementById("button-left").onclick=this.showMenu.bind(this),window.onresize=function(){if(!0!==this.isTouchDevice){var e=document.getElementById("menu");window.innerWidth>960?e.style.left="0px":e.style.left="-600px"}},this.api.t.on("Controller","all",e=>{e.data&&e.data.state&&this.render()})}clear(){this.nav.innerHTML=""}render(e){this.api.getControllerPlugins().then(t=>{this.clear();const n=Object.keys(this.plugins);let i=document.createElement("ul");for(let o=0;o<t.length;o++){const l=t[o];if(-1===n.indexOf(l.callsign))continue;const d=this.plugins[l.callsign];if("deactivated"!==l.state&&!0===d.renderInMenu){console.debug("Menu :: rendering "+l.callsign);var s=document.createElement("li");s.id="item_"+l.callsign,void 0===e&&0===o||e===l.callsign?s.className="menu-item active":s.className="menu-item",s.appendChild(document.createTextNode(void 0!==d.displayName?d.displayName:l.callsign)),s.onclick=this.toggleMenuItem.bind(null,l.callsign),i.appendChild(s),this.nav.appendChild(i)}}})}update(){this.render()}toggleMenuItem(e){for(var t=document.getElementsByClassName("menu-item"),n=0;n<t.length;n++)"item_"+e===t[n].id?t[n].className="menu-item active":t[n].className="menu-item";P(e)}showMenu(){var e=document.getElementById("menu");"0px"===e.style.left?e.style.left="-600px":e.style.left="0px"}};var k=class{constructor(e,t){this.api=t,this.deviceInfo=e,this.renderInMenu=!1,this.connected=!0,this.footer=document.getElementById("statusBar"),this.paused="true"===window.localStorage.getItem("paused"),this.footer.innerHTML='\n            <div class="status">\n                <label>Version</label>\n                <span id="statusBarVersion">-</span>\n            </div>\n\n            <div class="status">\n                <label>Serial</label>\n                <span id="statusBarSerial">-</span>\n            </div>\n\n            <div class="status">\n                <label>Uptime</label>\n                <span id="statusBarUptime">-</span>\n            </div>\n\n            <div class="status">\n                <label>CPU load</label>\n                <span id="statusBarCpuLoad">-</span>\n            </div>\n\n            <div class="status">\n                <label>RAM used</label>\n                <span id="statusBarUsedRam">-</span>\n                <span>/</span>\n                <span id="statusBarTotalRam">-</span>\n            </div>\n\n            <div class="status">\n                <label>GPU RAM used</label>\n                <span id="statusBarGpuRamUsed">-</span>\n                <span>/</span>\n                <span id="statusBarGpuRamTotal">-</span>\n            </div>\n\n            <div class="status">\n                <label class="statusBarKeyPress" id="keyPressedLabel">Last key send</label>\n                <span class="statusBarKeyPress" id="keyPressed">-</span>\n            </div>\n\n            <span id="pause-button" onclick="pause();">hide statistics</span>\n          ',this.versionSpan=document.getElementById("statusBarVersion"),this.uptimeSpan=document.getElementById("statusBarUptime"),this.serialSpan=document.getElementById("statusBarSerial"),this.cpuLoadSpan=document.getElementById("statusBarCpuLoad"),this.usedRamSpan=document.getElementById("statusBarUsedRam"),this.totalRamSpan=document.getElementById("statusBarTotalRam"),this.gpuUsedRamSpan=document.getElementById("statusBarGpuRamUsed"),this.gpuTotalRamSpan=document.getElementById("statusBarGpuRamTotal"),document.getElementById("pause-button").onclick=this.togglePause.bind(this),this.pauseButton=document.getElementById("pause-button"),void 0!==this.deviceInfo?(this.interval=setInterval(this.update.bind(this),E.refresh_interval),this.update(),this.updateStatisticsBlock(),this.api.t.on("connect",()=>{this.deviceIsConnected(!0)}),this.api.t.on("disconnect",()=>{this.deviceIsConnected(!1)})):this.togglePause()}render(e){void 0!==e&&(this.versionSpan.innerHTML=e.version,this.serialSpan.innerHTML=e.serialnumber,this.uptimeSpan.innerHTML=e.uptime,this.totalRamSpan.innerHTML=this.bytesToMbString(e.totalram),this.usedRamSpan.innerHTML=this.bytesToMbString(e.totalram-e.freeram),this.gpuTotalRamSpan.innerHTML=this.bytesToMbString(e.totalgpuram),this.gpuUsedRamSpan.innerHTML=this.bytesToMbString(e.totalgpuram-e.freegpuram),this.cpuLoadSpan.innerHTML=parseFloat(e.cpuload).toFixed(1)+" %")}update(){!1===this.connected&&this.deviceInfo.status().catch(e=>{}),!0===this.paused||this.deviceInfo&&"activated"!==this.deviceInfo.state||this.deviceInfo&&this.deviceInfo.status().then(this.render.bind(this))}updateStatisticsBlock(){this.pauseButton.innerHTML=!1===this.paused?"hide statistics":"show statistics";var e=this.footer.getElementsByClassName("status"),t=0;if(!1===this.paused){for(;t<e.length;t++)e[t].style.display="block";this.footer.style.padding="5px"}else{for(;t<e.length;t++)e[t].style.display="none";this.footer.style.padding="0px"}document.getElementById("notifications-block").style.bottom=!1===this.paused?"300px":"60px"}togglePause(){this.paused=!0!==this.paused,this.updateStatisticsBlock(),window.localStorage.setItem("paused",this.paused)}deviceIsConnected(e){if(this.connected!==e){var t=document.getElementById("disconnected");!0===e?(t.innerHTML="",t.style.display="none",plugins.menu.render(),renderCurrentPlugin()):(t.innerHTML='<div id="disconnectedBlock">\n            <div id="message">No connection with device</div>\n            <div id="reconnect" class="loading">Attempting to connect</div>\n        </div>',t.style.display="block"),this.connected=e}}bytesToMbString(e){return(e/1024/1024).toFixed(1)+" MB"}};var I=class{constructor(e){this.renderInMenu=!1,this.api=e,this.api.t.on("Controller","all",this.handleNotification),document.getElementById("hide-notifications").onclick=this.toggleVisibility.bind(this)}handleNotification(e){document.getElementById("notifications-block").style.display="block";var t=document.createElement("div"),n="",i=0;for(var s in e){if("Monitor"===e[s]&&(t.className="red"),"callsign"===s){var o=document.createElement("label");o.innerHTML='"'+e[s]+'"',t.appendChild(o)}else if("data"===s){n=n+s+": {";var l=0;for(var d in e.data)n=n+d+": "+e.data[d],l==Object.keys(e.data).length-1?n+="}":n+=", ",l++}else n=n+s+": "+e[s];"callsign"!=s&&i!=Object.keys(e).length-1&&(n+=", "),i++}var r=document.createElement("span");r.innerHTML=n,t.appendChild(r),document.getElementById("notifications").appendChild(t),document.getElementById("notifications").scrollTop=document.getElementById("notifications").scrollHeight}toggleVisibility(){var e="block"===document.getElementById("notifications").style.display;document.getElementById("notifications").style.display=e?"none":"block",document.getElementById("hide-notifications").innerHTML=e?"show console":"hide console"}};var S=class{constructor(e,t){this.api=t,this.callsign=e.callsign,this.configuration=e.configuration,this.classname=e.classname,this.state=e.state,this.supportsSuspended=!1,this.supportsVisibility=!1,this.renderInMenu=!0,this.displayName=void 0,this.rendered=!1}activate(e){const t={method:"PUT",path:`Controller/Activate/${e||this.callsign}`},n={plugin:"Controller",method:"activate",params:{callsign:e||this.callsign}};return this.api.req(t,n)}deactivate(e){const t={method:"PUT",path:`Controller/Deactivate/${e||this.callsign}`,body:null},n={plugin:"Controller",method:"deactivate",params:{callsign:e||this.callsign}};return this.api.req(t,n)}suspend(e){const t={method:"POST",path:`${e||this.callsign}/Suspend`},n={plugin:e||this.callsign,method:"state",params:"suspended"};return this.api.req(t,n)}resume(e){const t={method:"POST",path:`${e||this.callsign}/Resume`},n={plugin:e||this.callsign,method:"state",params:"resumed"};return this.api.req(t,n)}show(e){const t={method:"POST",path:`${e||this.callsign}/Show`,body:null};e||this.callsign;return this.api.req(t)}hide(e){const t={method:"POST",path:`${e||this.callsign}/Hide`,body:null};this.callsign;return this.api.req(t)}status(e){const t={method:"GET",path:e||this.callsign},n={plugin:e||this.callsign,method:"status"};return this.api.req(t,n)}render(){this.rendered=!0}close(){this.rendered=!1}};var L=class extends S{constructor(e,t){super(e,t),this.observablesList=[],this.restartList=[]}getMemoryInfo(e){return this.api.req({method:"GET",path:"Monitor"},{plugin:"Monitor",method:"status"})}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8"></div>\n        <table class="title grid__col grid__col--8-of-8">\n        <tr><td><div class="text grid__col grid__col--6-of-8">Observables</div></td>\n        <td><div class="text grid__col grid__col--6-of-8">\n            <select id="observables" style="width: fit-content;"></select>                   </div></td><td rowspan="4">\n        <div id="plugOutput"></div></td></tr><tr><td>\n        <div class="text grid__col grid__col--6-of-8">RestartThreshold</div></td><td><div class="text grid__col grid__col--6-of-8"><select id="restart" style="width: -webkit-fill-available;"> </select>\n        </div> </td></tr><tr><td></td><td>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="setRestart" style="width: 100%;"> Set</button></div></td></tr></table>',this.getObservableList(),this.observableListEl=document.getElementById("observables"),this.restartListEl=document.getElementById("restart"),this.bt_setRestart=document.getElementById("setRestart"),this.bt_setRestart.onclick=this.setRestartThreshold.bind(this)}getObservableList(){this.status().then(e=>{for(var t=[],n=0;n<e.length;n++)t[n]=e[n].name?e[n].name:e[n].observable;this.observablesList=t,this.renderObservables()})}renderObservables(){this.observableListEl.innerHTML="";for(var e=0;e<this.observablesList.length;e++){this.observableListEl.appendChild(document.createElement("option")).innerHTML=`${this.observablesList[e]}`}var t=[];for(e=1;e<=20;e++)t[e]=e;for(this.restartList=t,this.restartListEl.innerHTML="",e=1;e<=20;e++){this.restartListEl.appendChild(document.createElement("option")).innerHTML=`${this.restartList[e]}`}}setRestartThreshold(){const e=observables.selectedIndex,t='{"observable" : "'+observables.options[e].text+'","restartlimit" :"'+restart.value+'"}',n={method:"POST",path:`${this.callsign}`,body:t},i={plugin:this.callsign,method:"restartlimits",params:{callsign:observables.options[e].text,operational:{limit:restart.value},memory:{limit:restart.value}}};this.api.req(n,i)}getMonitorDataAndDiv(e,t){var n=this;return new Promise((t,i)=>{this.getMemoryInfo(e).then(s=>{let o=s.filter(t=>t.observable===e||t.name===e||valse);o&&o[0]?t(n.createMonitorDiv(o[0])):i()})})}createMonitorDiv(e){if(void 0!==e.measurment&&(e.measurements=e.measurment),void 0!==e.measurements&&void 0!==e.measurements.resident){var t=e.measurements,n=document.createElement("div"),i=document.createElement("div");for(var s in i.className="title grid__col grid__col--8-of-8",i.innerHTML="Memory",n.appendChild(i),t.resident){var o=document.createElement("div");o.className="label grid__col grid__col--2-of-8",n.appendChild(o);var l=document.createElement("label");l.innerHTML=s,o.appendChild(l);var d=document.createElement("div");d.className="text grid__col grid__col--6-of-8";let e=t.resident[s];t.shared[s]&&(e-=t.shared[s]),d.innerHTML=this.bytesToMbString(e),n.appendChild(d)}var r=document.createElement("div");r.className="label grid__col grid__col--2-of-8",n.appendChild(r);var a=document.createElement("label");a.innerHTML="measurements",r.appendChild(a);var c=document.createElement("div");c.className="text grid__col grid__col--6-of-8",c.innerHTML=t.count,n.appendChild(c);var h=document.createElement("div");h.className="label grid__col grid__col--2-of-8",n.appendChild(h);var u=document.createElement("label");u.innerHTML="process",h.appendChild(u);var g=document.createElement("div");return g.className="text grid__col grid__col--6-of-8",g.innerHTML=t.process.last,n.appendChild(g),n}}bytesToMbString(e){return(e/1024/1024).toFixed(1)+" MB"}};var T=class extends S{constructor(e,t){super(e,t),this._url="",this._fps=0,this._isHidden=!1,this._isSuspended=!1,this.lastSetUrlKey="lastSetUrl",this.lastSetUrl=window.localStorage.getItem(this.lastSetUrlKey)||"",this.inspectorPort="9998",this.monitor=void 0,this.updateLoopInterval=void 0,this.template='<div id="content_{{callsign}}" class="grid">\n\n            <div class="title grid__col grid__col--8-of-8">Presets / URL</div>\n\n            <div class="label grid__col grid__col--2-of-8">URL</div>\n            <div id="{{callsign}}_current_url" class="text grid__col grid__col--6-of-8">-</div>\n\n            <div class="label grid__col grid__col--2-of-8">\n                <label for="{{callsign}}_url">Custom URL</label>\n            </div>\n            <div class="text grid__col grid__col--6-of-8">\n                <input type="text" id="{{callsign}}_url" size="20"/>\n                <button id="{{callsign}}_button" type="button">SET</button>\n                <button id="{{callsign}}_reloadbutton" type="button">RELOAD</button>\n            </div>\n\n            <div class="label grid__col grid__col--2-of-8">URL presets</div>\n            <div class="text grid__col grid__col--6-of-8">\n                <select id="{{callsign}}_linkPresets"></select>\n            </div>\n\n            <div class="title grid__col grid__col--8-of-8">Performance</div>\n            <div class="label grid__col grid__col--2-of-8">FPS</div>\n            <div id="{{callsign}}_fps" class="text grid__col grid__col--6-of-8">-</div>\n            <div id="{{callsign}}Memory" class="memoryInfo"></div>\n\n            <div class="title grid__col grid__col--8-of-8">Tools</div>\n\n            <div class="label grid__col grid__col--2-of-8">Current State</div>\n                <div id="{{callsign}}StateInfo" class="text grid__col grid__col--6-of-8"></div>\n                <div class="label grid__col grid__col--2-of-8"></div>\n                <div class="label grid__col grid__col--6-of-8">\n                    <button id="{{callsign}}SuspendButton" type="button"></button>\n            </div>\n\n            <div class="label grid__col grid__col--2-of-8">Web Inspector</div>\n            <div class="text grid__col grid__col--6-of-8">\n                <button type="button" id="{{callsign}}Inspector">INSPECT</button>\n            </div>\n\n        </div>',this.presets=[{Name:"Select a preset",URL:""},{Name:"about:blank",URL:"about:blank"},{Name:"Smashcat",URL:"http://www.smashcat.org/av/canvas_test/"},{Name:"HTML5",URL:"http://beta.html5test.com/"},{Name:"PeaceKeeper",URL:"http://peacekeeper.futuremark.com/run.action"},{Name:"ChipTune",URL:"http://www.chiptune.com/kaleidoscope/"},{Name:"Poster Circle",URL:"http://www.webkit.org/blog-files/3d-transforms/poster-circle.html"},{Name:"Aquarium",URL:"http://webglsamples.org/aquarium/aquarium.html"},{Name:"Particles",URL:"http://oos.moxiecode.com/js_webgl/particles_morph/"},{Name:"EME v3 (race car)",URL:"http://cdn.metrological.com/static/eme-v3-clean.html"},{Name:"MSE 2018 (no vp9)",URL:"http://yt-dash-mse-test.commondatastorage.googleapis.com/unit-tests/2018.html?novp9=true"},{Name:"EME 2018",URL:"http://yt-dash-mse-test.commondatastorage.googleapis.com/unit-tests/2018.html?test_type=encryptedmedia-test"},{Name:"Progressive",URL:"http://yt-dash-mse-test.commondatastorage.googleapis.com/unit-tests/2018.html?test_type=progressive-test"},{Name:"YouTube",URL:"http://youtube.com/tv"},{Name:"HelloRacer",URL:"http://www.emerveille.fr/lab/helloracer/index.html"},{Name:"Leaves",URL:"http://www.webkit.org/blog-files/leaves"},{Name:"Canvas Dots",URL:"http://themaninblue.com/experiment/AnimationBenchmark/canvas/"},{Name:"Anisotropic",URL:"http://whiteflashwhitehit.com/content/2011/02/anisotropic_webgl.html"},{Name:"Pasta",URL:"http://alteredqualia.com/three/examples/webgl_pasta.html"},{Name:"CSS3",URL:"http://css3test.com"},{Name:"Kraken",URL:"http://krakenbenchmark.mozilla.org/kraken-1.1/driver.html"},{Name:"KeyPress Test",URL:"http://keycode.info"}],void 0!==this.configuration&&void 0!==this.configuration.inspector&&(this.inspectorPort=this.configuration.inspector.split(":")[1]),this.api.getControllerPlugins().then(e=>{let t=e.filter(e=>"Monitor"===e.callsign);void 0!==t&&(this.monitor=new L(t,this.api))})}status(){const e={method:"GET",path:this.callsign},t={plugin:this.callsign,method:"state"};return this.api.req(e,t)}fps(){const e={method:"GET",path:this.callsign},t={plugin:this.callsign,method:"fps"};return this.api.req(e,t)}url(){const e={method:"GET",path:this.callsign},t={plugin:this.callsign,method:"url"};return this.api.req(e,t)}render(){var e=document.getElementById("main"),t=this.template.replace(/{{callsign}}/g,this.callsign);e.innerHTML=t,document.getElementById(this.callsign+"_url").value=this.lastSetUrl,document.getElementById(this.callsign+"_button").onclick=this.getAndSetUrl.bind(this),document.getElementById(this.callsign+"_reloadbutton").onclick=this.reloadUrl.bind(this),document.getElementById(this.callsign+"_linkPresets").onchange=this.getAndSetUrlFromPresets.bind(this);var n=document.getElementById(this.callsign+"_linkPresets");if(0===n.children.length)for(var i=0;i<this.presets.length;i++){var s=document.createElement("option");s.text=this.presets[i].Name,s.value=this.presets[i].URL,n.appendChild(s)}document.getElementById(this.callsign+"Inspector").onclick=this.launchWebinspector.bind(this),this.updateLoopInterval=setInterval(this.updateLoop.bind(this),E.refresh_interval),this.rendered=!0,this.updateLoop()}updateLoop(){if(!1===this.rendered)return;let e=this;this.status().then(t=>{e._isSuspended=t.suspended?t.suspended:"suspended"===t}).then(this.fps.bind(this)).then(t=>{e._fps=t.fps?t.fps:t}).then(this.url.bind(this)).then(t=>{e._url=t.url?t.url:t}).then(this.update.bind(this))}close(){window.removeEventListener("keydown",this.handleKey.bind(this),!1),clearInterval(this.updateLoopInterval),delete this.updateLoopInterval,this.rendered=!1}update(){document.getElementById(this.callsign+"_current_url").innerHTML=this._url,document.getElementById(this.callsign+"_fps").innerHTML=this._fps;var e=this._isSuspended?"Suspended":"Resumed",t=this._isSuspended?"Resume":"Suspend";document.getElementById(this.callsign+"StateInfo").innerHTML=e;var n=document.getElementById(this.callsign+"SuspendButton");n.innerHTML=t.toUpperCase(),n.onclick=this.toggleSuspend.bind(this,t),this.monitor&&this.monitor.getMonitorDataAndDiv().then(e=>{var t=document.getElementById(this.callsign+"Memory");t.innerHTML="",t.appendChild(e)})}setUrl(e){if(""===e)return;console.log("Setting url "+e+" for "+this.callsign);var t={url:e};const n={method:"POST",path:this.callsign+"/URL",body:t};this.callsign;this.api.req(n,null),document.getElementById(this.callsign+"_linkPresets").selectedIndex=0}getAndSetUrl(){this.lastSetUrl=document.getElementById(this.callsign+"_url").value,this.setUrl(this.lastSetUrl),window.localStorage.setItem(this.lastSetUrlKey,this.lastSetUrl)}reloadUrl(){this.setUrl(this.callsign,document.getElementById(this.callsign+"_current_url").innerHTML)}getAndSetUrlFromPresets(){var e=document.getElementById(this.callsign+"_linkPresets").selectedIndex;e>0&&this.setUrl(this.presets[e].URL)}handleKey(e){var t=document.getElementById("WebKitBrowser_url");13===e.which&&t&&t===document.activeElement&&this.getAndSetUrl()}toggleSuspend(e){"Resume"===e?this.resume():this.suspend()}launchWebinspector(){var e="http://"+this.api.host[0]+":"+this.inspectorPort;window.open(e,"_blank").focus()}};var B=class extends S{constructor(e,t){super(e,t),this.monitor=void 0,this.netflixVisibilityListener=this.api.t.on("Netflix","visibilitychange",e=>{"boolean"==typeof e.hidden&&(this.isHidden=e.hidden,!0===this.rendered&&this.update())}),this.netflixStateListener=this.api.t.on("Netflix","statechange",e=>{"boolean"==typeof e.suspended&&(this.isSuspended=e.suspended,!0===this.rendered&&this.update())}),this.api.getControllerPlugins().then(e=>{let t=e.filter(e=>"Monitor"===e.callsign);void 0!==t&&(this.monitor=new L(t,this.api))})}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            ESN\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            ID\n        </div>\n        <div id="netflix-esn" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n\n        <div id="form-netflix">\n            <div id="NetflixMemory" class="memoryInfo"></div>\n            <div>\n                <div class="title grid__col grid__col--8-of-8">Memory</div>\n                <div class="label grid__col grid__col--2-of-8">Current State</div>\n                <div id="NetflixStateInfo" class="text grid__col grid__col--6-of-8"></div>\n                <div class="label grid__col grid__col--2-of-8"></div>\n                <div class="label grid__col grid__col--6-of-8">\n                    <button id="NetflixSuspendButton" type="button"></button>\n                </div>\n            </div>\n        </div>',this.interval=setInterval(this.update.bind(this),conf.refresh_interval),this.update()}update(e){this.status().then(e=>{e.esn&&(document.getElementById("netflix-esn").innerHTML=e.esn);var t=e.suspended?"Suspended":"Resumed";document.getElementById("NetflixStateInfo").innerHTML=t;var n="Suspend";!0===e.suspended&&(n="Resume");var i=document.getElementById("NetflixSuspendButton");i.innerHTML=n.toUpperCase(),i.onclick=this.toggleSuspend.bind(this,n),this.monitor&&this.monitor.getMonitorDataAndDiv().then(e=>{var t=document.getElementById(this.callsign+"Memory");t.innerHTML="",t.appendChild(e)})})}close(){clearInterval(this.interval),this.netflixVisibilityListener&&"function"==typeof this.netflixVisibilityListener.dispose&&this.netflixVisibilityListener.dispose(),this.netflixStateListener&&"function"==typeof this.netflixStateListener.dispose&&this.netflixStateListener.dispose()}toggleSuspend(e){var t=this;"Resume"===e?this.resume().then(()=>{t.update({suspended:!1})}).catch(e=>{t.render()}):this.suspend().then(()=>{t.update({suspended:!0})}).catch(e=>{t.render()})}};var M={BluetoothControl:class extends S{constructor(e,t){super(e,t),this._devices=[],this.scanning=!1,this.displayName="BluetoothControl"}render(){document.getElementById("main").innerHTML='\n        <div class="title grid__col grid__col--8-of-8">\n            Status\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Devices\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <select id="BT_Devices"></select>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Scanning\n        </div>\n        <div id="BT_Scanning" class="text grid__col grid__col--6-of-8">\n            OFF\n        </div>\n\n        <div class="title grid__col grid__col--8-of-8">\n            Device\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Name\n        </div>\n        <div id="BT_Name" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Type\n        </div>\n        <div id="BT_Type" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Connected\n        </div>\n        <div id="BT_Connected" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Paired\n        </div>\n        <div id="BT_Paired" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">Controls</div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="BT_Connect">Connect</button>\n            <button type="button" id="BT_Disconnect">Disconnect</button>\n            <button type="button" id="BT_Pair">Pair</button>\n            <button type="button" id="BT_Unpair">Unpair</button>\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">Remote</div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="BT_Assign">Assign</button>\n            <button type="button" id="BT_Revoke">Revoke</button>\n        </div>\n\n        <div class="title grid__col grid__col--8-of-8">\n            Discovery\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            <label for="autofwd">Scan</label>\n        </div>\n        <div class="grid__col grid__col--6-of-8">\n            <button type="button" id="BT_ScanForDevices">Scan</button>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            BlueTooth Low Energy\n        </div>\n        <div class="grid__col grid__col--6-of-8">\n            <div class="checkbox">\n                <input type="checkbox" id="BT_LE" checked></input>\n                <label for="BT_LE"></label>\n            </div>\n        </div>\n\n        <br>\n\n        <div id="statusMessages" class="text grid__col grid__col--8-of-8"></div>\n        ',this.scanButton=document.getElementById("BT_ScanForDevices"),this.pairButton=document.getElementById("BT_Pair"),this.unpairButton=document.getElementById("BT_Unpair"),this.connectButton=document.getElementById("BT_Connect"),this.disconnectButton=document.getElementById("BT_Disconnect"),this.btLowEnergyButton=document.getElementById("BT_LE"),this.assignButton=document.getElementById("BT_Assign"),this.revokeButton=document.getElementById("BT_Revoke"),this.deviceList=document.getElementById("BT_Devices"),this.deviceList.onchange=this.renderDevice.bind(this),this.scanButton.onclick=this.scanForDevices.bind(this),this.pairButton.onclick=this.pairDevice.bind(this),this.unpairButton.onclick=this.unpairDevice.bind(this),this.disconnectButton.onclick=this.disconnect.bind(this),this.connectButton.onclick=this.connect.bind(this),this.assignButton.onclick=this.assign.bind(this),this.revokeButton.onclick=this.revoke.bind(this),this.nameEl=document.getElementById("BT_Name"),this.typeEl=document.getElementById("BT_Type"),this.connectedEl=document.getElementById("BT_Connected"),this.pairedEl=document.getElementById("BT_Paired"),this.scanningStatus=document.getElementById("BT_Scanning"),this.statusMessages=document.getElementById("statusMessages"),this.deviceList=document.getElementById("BT_Devices"),this.scanListener=this.api.t.on("BluetoothControl","scancomplete",this.scanComplete.bind(this)),this.deviceStateListener=this.api.t.on("BluetoothControl","devicestatechange",this.render.bind(this)),this.update()}devices(){return this.api.req(null,{plugin:"BluetoothControl",method:"devices"}).then(e=>{if(void 0!==e)return this._devices=[],e&&e.length&&e.forEach(e=>{this._devices.push({address:e})}),this._devices})}device(e){const t={plugin:"BluetoothControl",method:"device@"+e};return this.api.req(null,t)}scanComplete(){this.scanning=!1,this.renderScanStatus(),this.update(),this.updateStatus("Scan complete")}renderScanStatus(){const e={method:"GET",path:this.callsign};return this.api.req(e,null).then(e=>{this.scanningStatus.innerHTML=!0===e.scanning?"ON":"OFF"})}updateDeviceList(){this.deviceList.innerHTML="",this._devices&&this._devices.length&&(this._devices.forEach(e=>{this.deviceList.appendChild(document.createElement("option")).innerHTML=e.address}),this.renderDevice())}renderDevice(){let e=this.deviceList.selectedIndex;if(-1===e||0===this._devices.length)return;let t=this._devices[e].address;this.device(t).then(n=>{n&&(this._devices[e]={address:t,...n}),this.nameEl.innerHTML=this._devices[e].name,this.typeEl.innerHTML=this._devices[e].type,this.connectedEl.innerHTML=this._devices[e].connected,this.pairedEl.innerHTML=this._devices[e].paired})}updateStatus(e,t=!1){window.clearTimeout(this.statusMessageTimer),this.statusMessages.innerHTML=e,this.statusMessages.style=t?"color: red":"",this.statusMessageTimer=setTimeout(this.updateStatus,5e3,"")}update(){this.renderScanStatus(),this.devices().then(()=>{this.updateDeviceList()})}scanForDevices(){this.updateStatus("Start scanning"),this.scanning=!0,this.renderScanStatus();const e={plugin:"BluetoothControl",method:"scan",params:{type:this.btLowEnergyButton.checked?"LowEnergy":"Regular",timeout:10}};this.api.req(null,e).catch(e=>{e.message&&this.updateStatus(`Error: ${e.message}`)})}pairDevice(){var e=this.deviceList.selectedIndex;this.updateStatus(`Pairing to ${this._devices[e].name}`);const t={plugin:this.callsign,method:"pair",params:{address:this._devices[e].address}};this.api.req(null,t).catch(e=>{e.message&&this.updateStatus(`Error: ${e.message}`,!0)})}unpairDevice(){var e=this.deviceList.selectedIndex;this.updateStatus(`Unpairing ${this._devices[e].name}`);const t={plugin:this.callsign,method:"unpair",params:{address:this._devices[e].address}};this.api.req(null,t).catch(e=>{e.message&&this.updateStatus(`Error: ${e.message}`,!0)})}connect(){var e=this.deviceList.selectedIndex;this.updateStatus(`Connecting to ${this._devices[e].name}`);const t={plugin:this.callsign,method:"connect",params:{address:this._devices[e].address}};this.api.req(null,t).catch(e=>{e.message&&this.updateStatus(`Error: ${e.message}`,!0)})}disconnect(){var e=this.deviceList.selectedIndex;this.updateStatus(`Disconnecting from ${this._devices[e].name}`);const t={plugin:this.callsign,method:"disconnect",params:{address:this._devices[e].address}};this.api.req(null,t).catch(e=>{e.message&&this.updateStatus(`Error: ${e.message}`,!0)})}assign(){var e=this.deviceList.selectedIndex;this.updateStatus(`Assigning ${this._devices[e].name}`);const t={plugin:"BluetoothRemoteControl",method:"assign",params:{address:this._devices[e].address}};this.api.req(null,t)}revoke(){var e=this.deviceList.selectedIndex;this.updateStatus(`Revoking ${this._devices[e].name}`);const t={plugin:"BluetoothRemoteControl",method:"revoke",params:{address:this._devices[e].address}};this.api.req(null,t).catch(e=>{e.message&&this.updateStatus(`Error: ${e.message}`,!0)})}close(){clearInterval(this.statusMessageTimer),this.scanListener&&"function"==typeof this.scanListener.dispose&&this.scanListener.dispose(),this.scanListener&&"function"==typeof this.scanListener.dispose&&this.deviceStateListener.dispose()}},Cobalt:class extends T{constructor(e,t){super(e,t),this.template='<div id="content_{{callsign}}" class="grid">\n\n            <div class="title grid__col grid__col--8-of-8">Presets / URL</div>\n\n            <div class="label grid__col grid__col--2-of-8">URL</div>\n            <div id="{{callsign}}_current_url" class="text grid__col grid__col--6-of-8">-</div>\n\n            <div class="label grid__col grid__col--2-of-8">\n                <label for="{{callsign}}_url">Custom URL</label>\n            </div>\n            <div class="text grid__col grid__col--6-of-8">\n                <input type="text" id="{{callsign}}_url" size="20"/>\n                <button id="{{callsign}}_button" type="button">SET</button>\n                <button id="{{callsign}}_reloadbutton" type="button">RELOAD</button>\n            </div>\n\n            <div class="label grid__col grid__col--2-of-8">URL presets</div>\n            <div class="text grid__col grid__col--6-of-8">\n                <select id="{{callsign}}_linkPresets"></select>\n            </div>\n\n            <div class="title grid__col grid__col--8-of-8">Performance</div>\n            <div class="label grid__col grid__col--2-of-8">FPS</div>\n            <div id="{{callsign}}_fps" class="text grid__col grid__col--6-of-8">-</div>\n            <div id="{{callsign}}Memory" class="memoryInfo"></div>\n\n            <div class="title grid__col grid__col--8-of-8">Tools</div>\n\n            <div class="label grid__col grid__col--2-of-8">Current State</div>\n                <div id="{{callsign}}StateInfo" class="text grid__col grid__col--6-of-8"></div>\n                <div class="label grid__col grid__col--2-of-8"></div>\n                <div class="label grid__col grid__col--6-of-8">\n                    <button id="{{callsign}}SuspendButton" type="button"></button>\n            </div>\n\n            <div class="label grid__col grid__col--2-of-8">Visibility</div>\n            <div id="{{callsign}}VisibilityStateInfo" class="text grid__col grid__col--6-of-8"></div>\n            <div class="label grid__col grid__col--2-of-8"></div>\n            <div class="text grid__col grid__col--6-of-8">\n                <button type="button" id="{{callsign}}VisibilityButton">HIDE</button>\n            </div>\n\n            <div style="visibility:hidden;">\n                <div class="label grid__col grid__col--2-of-8">Web Inspector</div>\n                <div class="text grid__col grid__col--6-of-8">\n                    <button type="button" id="{{callsign}}Inspector">INSPECT</button>\n                </div>\n            </div>\n\n        </div>'}},Compositor:class extends S{constructor(e,t){super(e,t),this.resolutions=["720p","720p50Hz","1080p24Hz","1080i50Hz","1080p50Hz","1080p60Hz","2160p50Hz","2160p60Hz"]}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Compositor\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n        Z-Order\n        </div>\n        <div id="zorder" class="text grid__col grid__col--6-of-8"></div>\n        <div class="label grid__col grid__col--2-of-8">\n            <label for="compositorResolutions">Resolution</label>\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <select id="compositorResolutions"></select>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            <label for="compositorClients">Clients</label>\n        </div>\n        <div class="text grid__col grid__col--6-of-8" id="compositorClientsDiv">\n            <select id="compositorClients"></select>\n        </div>\n        <div class="text grid__col grid__col--8-of-8"></div>\n\n        <div id="controls"></div>',document.getElementById("compositorResolutions").onclick=this.setResolution.bind(this),this.resolutionsList=document.getElementById("compositorResolutions"),this.menu=document.getElementById("compositorClients"),this.controlDiv=document.getElementById("controls"),this.compositorClientsDiv=document.getElementById("compositorClientsDiv"),this.controlDiv.style.display="none",this.resolutionsList.innerHTML="";for(var e=0;e<this.resolutions.length;e++){var t=document.createElement("option");t.value=this.resolutions[e],t.innerHTML=this.resolutions[e],this.resolutionsList.appendChild(t)}this.getClients().then(e=>{null!=e&&Array.isArray(e)?e.length>0&&this.renderControls(e):this.compositorClientsDiv.innerHTML="No clients found."}),this.zorder().then(e=>{document.getElementById("zorder").innerHTML=e.toString()}),this.resolution().then(e=>{-1!==this.resolutions.indexOf(e)&&(this.resolutionsList.selectedIndex=this.resolutions.indexOf(e))})}getClients(){const e={plugin:this.callsign,method:"zorder"};return this.api.req(null,e)}renderControls(e){this.controlDiv.innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Controls\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Focus\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="compositorSetTop">Set Top</button>\n            <button type="button" id="compositorSetInput">Set Input</button>\n        </div>\n        <div class="text grid__col grid__col--8-of-8"></div>\n        <div class="label grid__col grid__col--2-of-8">\n            Opacity\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="sliderOpacity" type="range" min="0" max="256" step="1" value="256"/>\n            <input id="numOpacity" type="number" min="0" max="256"  size="5" value="256"/>\n        </div>\n        <div class="label grid__col grid__col--2-of-8"></div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="compositorSetOpacity">Set</button>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Visibility\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="webkit_hide">Hide</button>\n            <button type="button" id="webkit_show">Show</button>\n        </div>\n        <div class="text grid__col grid__col--8-of-8"></div>\n        <div class="title grid__col grid__col--8-of-8">\n            Geometry\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            X\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="compositorXGeometry" type="number" value="0"/>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Y\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="compositorYGeometry" type="number" value="0"/>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Width\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="compositorWidthGeometry" type="number" value="1280" min="0"/>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Height\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="compositorHeightGeometry" type="number" value="720" min="0"/>\n        </div>\n        <div class="label grid__col grid__col--2-of-8"></div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="compositorGeometry">Set</button>\n        </div>',document.getElementById("compositorSetTop").onclick=this.compositorAction.bind(this,"putontop"),document.getElementById("compositorSetInput").onclick=this.compositorAction.bind(this,"select"),document.getElementById("sliderOpacity").onchange=this.updateValue.bind(this,"sliderOpacity","numOpacity"),document.getElementById("numOpacity").onchange=this.updateValue.bind(this,"numOpacity","sliderOpacity"),document.getElementById("numOpacity").onkeyup=this.updateValue.bind(this,"numOpacity","sliderOpacity"),document.getElementById("numOpacity").onpaste=this.updateValue.bind(this,"numOpacity","sliderOpacity"),document.getElementById("numOpacity").oninput=this.updateValue.bind(this,"numOpacity","sliderOpacity"),document.getElementById("compositorSetOpacity").onclick=this.compositorSetOpacity.bind(this),document.getElementById("webkit_hide").onclick=this.compositorVisible.bind(this,"Hide"),document.getElementById("webkit_show").onclick=this.compositorVisible.bind(this,"Show"),document.getElementById("compositorGeometry").onclick=this.compositorSetGeometry.bind(this),document.getElementById("compositorClients").onchange=this.clientChange.bind(this);var t=document.getElementById("compositorClients");t.innerHTML="";var n=document.createElement("option");n.value="",n.setAttributeNode(document.createAttribute("disabled")),n.setAttributeNode(document.createAttribute("selected")),n.innerHTML="Select a client",t.appendChild(n);for(var i=0;i<e.length;i++){var s=document.createElement("option");s.value=e[i],s.innerHTML=e[i],t.appendChild(s)}}compositorAction(e){const t=this.menu.options[this.menu.selectedIndex].value,n={plugin:this.callsign,method:e,params:{client:t}};this.api.req(null,n)}clientChange(){this.controlDiv.style.display="";const e=this.menu.options[this.menu.selectedIndex].value;"Select a client"!==e&&this.geometry(e).then(e=>{document.getElementById("compositorXGeometry").value=e.x,document.getElementById("compositorYGeometry").value=e.y,document.getElementById("compositorWidthGeometry").value=e.width,document.getElementById("compositorHeightGeometry").value=e.height})}opacity(e,t){const n={method:"GET",path:`${this.callsign}/${e}/Opacity/${t}`},i={plugin:this.callsign,method:"opacity@"+e};return void 0!==t&&(n.method="POST",i.params=t),this.api.req(n,i)}compositorSetOpacity(){var e=this.menu.options[this.menu.selectedIndex].value,t=document.getElementById("sliderOpacity").value;return this.opacity(e,t)}updateValue(e,t){document.getElementById(t).value=document.getElementById(e).value}compositorVisible(e){console.log(e);var t=this.menu.options[this.menu.selectedIndex].value;const n={method:"POST",path:`${this.callsign}/Visible/${e}`},i={plugin:this.callsign,method:"visiblity@"+t,params:"Show"===e?"visible":"hidden"};this.api.req(n,i)}geometry(e,t){const n={method:"GET",path:`${this.callsign}/${e}/Geometry`},i={plugin:this.callsign,method:"geometry@"+e};return void 0!==t&&(n.method="POST",n.path+=`/${t.x}/${t.y}/${t.w}/${t.h}`,i.params={x:parseInt(t.x),y:parseInt(t.y),width:parseInt(t.w),height:parseInt(t.h)}),this.api.req(n,i)}zorder(e){const t={plugin:this.callsign,method:"zorder"};return this.api.req(null,t)}compositorSetGeometry(){const e=this.menu.options[this.menu.selectedIndex].value,t={x:document.getElementById("compositorXGeometry").value,y:document.getElementById("compositorYGeometry").value,w:document.getElementById("compositorWidthGeometry").value,h:document.getElementById("compositorHeightGeometry").value};return this.geometry(e,t)}resolution(e){const t={method:"GET",path:`${this.callsign}/Resolution`},n={plugin:this.callsign,method:"resolution"};return void 0!==e&&(t.method="POST",t.path+=`/${e}`,n.params=e),this.api.req(t,n)}setResolution(){var e=this.resolutionsList.options[this.resolutionsList.selectedIndex].value;return this.resolution(e)}},Controller:class extends S{constructor(e,t){super(e,t),this.plugins=void 0,this.mainDiv=void 0,this.controllerListener=void 0}controllerStatus(e){const t={plugin:"Controller"};return t.method=e?`status@${e}`:"status",api.req(void 0,t)}harakiri(){const e={plugin:"Controller",method:"harakiri",params:{callsign:this.callsign}};return this.api.req({method:"PUT",path:"Controller/Harakiri",body:null},e)}initiateDiscovery(){return this.api.req({method:"PUT",path:"Controller/Discovery",body:null},{plugin:"Controller",method:"startdiscovery",params:{ttl:1}})}getDiscovery(){return this.api.req({method:"GET",path:"Controller/Discovery",body:null},{plugin:"Controller",method:"discoveryresults"})}persist(e){return this.api.req({method:"PUT",path:"Controller/Persist",body:null},{plugin:"Controller",method:"storeconfig"})}toggleActivity(e){for(var t,n=0;n<this.plugins.length;n++)if(this.plugins[n].callsign===e){t=this.plugins[n];break}"deactivated"===t.state?(console.debug("Activating "+e),this.activate(e).then(n=>{void 0!==plugins[e]&&(plugins[e].state="activated"),t.state="activated"}).catch(e=>{this.render()})):(console.debug("Deactivating "+e),this.deactivate(e).then(n=>{void 0!==plugins[e]&&(plugins[e].state="deactivated"),t.state="deactivated"}).catch(e=>{this.render()}))}toggleSuspend(e){for(var t,n=0;n<this.plugins.length;n++)if(this.plugins[n].callsign===e){t=this.plugins[n];break}if("deactivated"===t.state)return console.debug("Activating "+e),void this.activate(e).then(t=>{void 0!==plugins[e]&&(plugins[e].state="activated"),!1===document.getElementById(e+"suspend").checked?this.resume(e).then(this.render.bind(this)):api.suspendPlugin(e).then(this.render.bind(this))});"resumed"===t.state?(console.debug("Suspending "+e),this.suspend(e).then(n=>{this.updateSuspendLabel(e,"resume"),void 0!==plugins[e]&&(plugins[e].state="resumed"),document.getElementById(e+"suspend").checked=!0,t.state="suspended"})):(console.debug("Resuming "+e),this.resume(e).then(n=>{this.updateSuspendLabel(e,"suspend"),void 0!==plugins[e]&&(plugins[e].state="suspended"),document.getElementById(e+"suspend").checked=!1,t.state="resumed"}))}clear(){this.mainDiv.innerHTML=""}discover(){console.log("Initiating discovery"),this.initiateDiscovery();let e=this;setTimeout((function(){e.getDiscovery().then(e=>{var t=e.bridges?e.bridges:e,n=document.getElementById("discoveryList");n.innerHTML="";for(var i=0;i<t.length;i++){var s=document.createElement("li");s.innerHTML=t[i].locator,n.appendChild(s)}})}),3e3)}render(){this.controllerListener||(this.controllerListener=this.api.t.on("Controller","statechange",e=>{void 0!==e.state&&!0===this.rendered&&this.render(),void 0!==e.suspended&&!0===this.rendered&&this.render()})),this.mainDiv=document.getElementById("main"),this.mainDiv.innerHTML='\n          <div class="title grid__col grid__col--8-of-8">\n            Plugins\n          </div>\n          <div id="controllerPlugins"></div>\n          <div class="title grid__col grid__col--8-of-8">\n            Device actions\n          </div>\n          <div class="text grid__col grid__col--8-of-8">\n            <button type="button" id="persistButton">PERSIST</button>\n          </div>\n          <div class="text grid__col grid__col--8-of-8">\n            <button type="button" id="harakiriButton">REBOOT</button>\n          </div>\n          <div class="title grid__col grid__col--8-of-8">\n            Discover devices\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            <button type="button" id="discoverButton">DISCOVER</button>\n          </div>\n          <div class="text grid__col grid__col--6-of-8">\n            <ul id="discoveryList"></ul>\n          </div>\n        </div>\n        ',document.getElementById("persistButton").onclick=this.persist.bind(this),document.getElementById("harakiriButton").onclick=this.harakiri.bind(this),document.getElementById("discoverButton").onclick=this.discover.bind(this);var e=document.getElementById("controllerPlugins");this.status().then(t=>{var n=t.plugins?t.plugins:t;this.plugins=n;for(var i=0;i<n.length;i++){var s=n[i],o=s.callsign;if("Controller"!==o){var l=document.createElement("div");l.className="label grid__col grid__col--2-of-8",e.appendChild(l);var d=document.createElement("label");d.innerHTML=o,d.setAttribute("for",o),l.appendChild(d);var r=document.createElement("div");r.className="grid__col grid__col--6-of-8 ",r.id=o+"MainDiv",e.appendChild(r);var a=document.createElement("div");a.className="checkbox",r.appendChild(a);var c=document.createElement("input");c.type="checkbox",c.id=o,"activated"!=s.state&&"resumed"!=s.state&&"suspended"!=s.state||(c.checked=!0),c.onclick=this.toggleActivity.bind(this,o),a.appendChild(c);var h=document.createElement("label");if(h.setAttribute("for",o),a.appendChild(h),"suspended"===s.state||"resumed"===s.state){var u=document.createElement("div");u.id=o+"suspenddiv",u.className="suspend";var g=document.createElement("input");g.type="checkbox",g.id=o+"suspend","suspended"==s.state&&(g.checked=!0),g.onclick=this.toggleSuspend.bind(this,o),u.appendChild(g);var p=document.createElement("label");p.setAttribute("for",o+"suspend"),p.id=o+"suspendlabel","suspended"==s.state?p.innerHTML="resume":p.innerHTML="suspend",u.appendChild(p),r.appendChild(u)}}}}),this.rendered=!0}updateSuspendLabel(e,t){document.getElementById(e+"suspendlabel").innerHTML=t}close(){this.controllerListener&&"function"==typeof this.controllerListener.dispose&&(this.controllerListener.dispose(),this.controllerListener=null)}},DeviceInfo:class extends S{constructor(e,t){super(e,t),this.renderInMenu=!0,this.displayName="Device Info",this.deviceInfoDiv=void 0,this.mainDiv=document.getElementById("main"),this.selectedNetworkInterface=0,this.deviceNameEl=void 0,this.serialNumberEl=void 0,this.versionEl=void 0,this.uptimeEl=void 0,this.totalRamEl=void 0,this.usedRamEl=void 0,this.freeRamEl=void 0,this.usedGpuRamEl=void 0,this.freeGpuRamEl=void 0,this.totalGpuRamEl=void 0,this.cpuLoadEl=void 0,this.interfacesOptsEl=void 0,this.macIdEl=void 0,this.ipAddressEl=void 0,this.chartOptions={interval:1e3,maxElements:50},this.ramChart=void 0,this.gpuChart=void 0,this.cpuChart=void 0,this.chartIntervalId=void 0,this.template='<div class="title grid__col grid__col--8-of-8">\n            Device\n          </div>\n\n          <div class="label grid__col grid__col--2-of-8">\n            Name\n          </div>\n          <div id="DeviceName" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            S/N\n          </div>\n          <div id="SerialNumber" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Version\n          </div>\n          <div id="Version" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Network Interface\n          </div>\n          <div class="text grid__col grid__col--6-of-8">\n            <select id="NetworkInterface">\n            </select>\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            MAC\n          </div>\n          <div id="MAC_ID" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            IP\n          </div>\n          <div id="IpAddress" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Uptime\n          </div>\n          <div id="Uptime" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n\n          <div class="title grid__col grid__col--8-of-8">\n            RAM\n          </div>\n\n          <div class="label grid__col grid__col--2-of-8">\n          Total RAM\n          </div>\n          <div id="TotalRam" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Used RAM\n          </div>\n          <div id="UsedRam" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Free RAM\n          </div>\n          <div id="FreeRam" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Total GPU RAM\n          </div>\n          <div id="TotalGpuRam" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Used GPU RAM\n          </div>\n          <div id="UsedGpuRam" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Free GPU RAM\n          </div>\n          <div id="FreeGpuRam" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n\n          <div class="title grid__col grid__col--8-of-8">\n            CPU\n          </div>\n\n          <div class="label grid__col grid__col--2-of-8">\n            CPU Load\n          </div>\n          <div id="CpuLoad" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n\n          <div class="title grid__col grid__col--8-of-8">\n            CPU / GPU / RAM Graphs\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Poll interval in milliseconds\n          </div>\n          <div id="FreeRam" class="text grid__col grid__col--6-of-8">\n            <input type="number" id="graph_poll_interval" value="1000" >\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Max elements per graph\n          </div>\n          <div id="FreeRam" class="text grid__col grid__col--6-of-8">\n            <input type="number" id="graph_max_elements" value="50" >\n          </div>\n\n          </div>\n          <div class="text grid__col grid__col--8-of-8">\n            <button type="button" id="startGraphs" >Start graphs</button>\n          </div>\n          <div id="graphs" style="display: none">\n              <div class="title grid__col grid__col--8-of-8">\n                RAM realtime\n              </div>\n              <div class="title grid__col grid__col--8-of-8">\n                <canvas id="graph_ram" width="800" height="250"></canvas>\n              </div>\n                <div class="title grid__col grid__col--8-of-8">\n                GPU RAM realtime\n              </div>\n              <div class="title grid__col grid__col--8-of-8">\n                <canvas id="graph_gpu" width="800" height="250"></canvas>\n              </div>\n                <div class="title grid__col grid__col--8-of-8">\n                CPU realtime\n              </div>\n              <div class="title grid__col grid__col--8-of-8">\n                <canvas id="graph_cpu" width="800" height="250"></canvas>\n              </div>\n          </div>\n            '}status(){return this.displayInfo().then(e=>new Promise((t,n)=>{this.deviceInfo().then(n=>{t({...e,...n})})}))}deviceInfo(){return this.api.req({method:"GET",path:"DeviceInfo"},{plugin:"DeviceInfo",method:"systeminfo"})}displayInfo(){return this.api.req({method:"GET",path:"DisplayInfo"},{plugin:"DisplayInfo",method:"displayinfo"})}addresses(){return this.api.req({method:"GET",path:"DeviceInfo"},{plugin:"DeviceInfo",method:"addresses"})}socketinfo(){return this.api.req({method:"GET",path:"DeviceInfo"},{plugin:"DeviceInfo",method:"socketinfo"})}update(){this.deviceInfo().then(e=>{let t=e.systeminfo?e.systeminfo:e;this.deviceNameEl.innerHTML=t.devicename,this.serialNumberEl.innerHTML=t.serialnumber,this.versionEl.innerHTML=t.version,this.uptimeEl.innerHTML=t.uptime,this.totalRamEl.innerHTML=this.bytesToMbString(t.totalram),this.usedRamEl.innerHTML=this.bytesToMbString(t.totalram-t.freeram),this.freeRamEl.innerHTML=this.bytesToMbString(t.freeram),this.cpuLoadEl.innerHTML=parseFloat(t.cpuload).toFixed(1)+" %",this.addresses().then(e=>{let t=e.addresses?e.addresses:e;this.interfacesOptsEl.innerHTML="";for(var n=0;n<t.length;n++){this.interfacesOptsEl.appendChild(document.createElement("option")).innerHTML=t[n].name}this.interfacesOptsEl.selectedIndex=this.selectedNetworkInterface,this.macIdEl.innerHTML=t[this.selectedNetworkInterface].mac,void 0!==t[this.selectedNetworkInterface].ip?this.ipAddressEl.innerHTML=t[this.selectedNetworkInterface].ip:this.ipAddressEl.innerHTML="-"})}),this.displayInfo().then(e=>{this.totalGpuRamEl.innerHTML=this.bytesToMbString(e.totalgpuram),this.freeGpuRamEl.innerHTML=this.bytesToMbString(e.freegpuram),this.usedGpuRamEl.innerHTML=this.bytesToMbString(e.totalgpuram-e.freegpuram)}),document.getElementById("startGraphs").onclick=this.startRealtimeGraphs.bind(this)}render(){this.mainDiv.innerHTML=this.template,this.deviceNameEl=document.getElementById("DeviceName"),this.serialNumberEl=document.getElementById("SerialNumber"),this.versionEl=document.getElementById("Version"),this.uptimeEl=document.getElementById("Uptime"),this.totalRamEl=document.getElementById("TotalRam"),this.usedRamEl=document.getElementById("UsedRam"),this.freeRamEl=document.getElementById("FreeRam"),this.totalGpuRamEl=document.getElementById("TotalGpuRam"),this.freeGpuRamEl=document.getElementById("FreeGpuRam"),this.usedGpuRamEl=document.getElementById("UsedGpuRam"),this.cpuLoadEl=document.getElementById("CpuLoad"),this.interfacesOptsEl=document.getElementById("NetworkInterface"),this.interfacesOptsEl.onchange=this.updateNetworkInterface.bind(this),this.macIdEl=document.getElementById("MAC_ID"),this.ipAddressEl=document.getElementById("IpAddress"),this.update()}startRealtimeGraphs(){this.chartOptions.maxElements=parseInt(document.getElementById("graph_max_elements").value),this.chartOptions.interval=parseInt(document.getElementById("graph_poll_interval").value),this.cpuChart=this.generateGraph("CPU usage",document.getElementById("graph_cpu").getContext("2d"),"#34c749","%"),this.ramChart=this.generateGraph("RAM used",document.getElementById("graph_ram").getContext("2d"),"#fc5652","MB"),this.gpuChart=this.generateGraph("GPU RAM used",document.getElementById("graph_gpu").getContext("2d"),"#fdbc40","MB"),this.chartIntervalId=setInterval(this.updateGraphs.bind(this),this.chartOptions.interval),document.getElementById("graphs").style.display="block"}generateGraph(e,t,n,i){return new Chart(t,{type:"line",data:{labels:[],datasets:[{label:e,backgroundColor:n,borderColor:n,data:[],fill:!1}]},options:{responsive:!1,scales:{yAxes:[{ticks:{callback:function(e,t,n){return e+i}}}]}}})}updateGraphs(){let e=this;const t=e.getTimestampForGraph();this.deviceInfo().then(n=>{e.ramChart&&(e.ramChart.config.data.labels.push(t),e.ramChart.config.data.datasets[0].data.push((n.totalram-n.freeram)/1024/1024),e.ramChart.config.data.labels.length>e.chartOptions.maxElements&&(e.ramChart.config.data.labels.shift(),e.ramChart.config.data.datasets[0].data.shift()),e.ramChart.update()),e.cpuChart&&(e.cpuChart.config.data.labels.push(t),e.cpuChart.config.data.datasets[0].data.push(parseFloat(n.cpuload).toFixed(1)),e.cpuChart.config.data.labels.length>e.chartOptions.maxElements&&(e.cpuChart.config.data.labels.shift(),e.cpuChart.config.data.datasets[0].data.shift()),e.cpuChart.update())}),this.displayInfo().then(n=>{e.gpuChart&&(e.gpuChart.config.data.labels.push(t),e.gpuChart.config.data.datasets[0].data.push((n.totalgpuram-n.freegpuram)/1024/1024),e.gpuChart.config.data.labels.length>e.chartOptions.maxElements&&(e.gpuChart.config.data.labels.shift(),e.gpuChart.config.data.datasets[0].data.shift()),e.gpuChart.update())})}close(){clearInterval(this.chartIntervalId),delete this.ramChart,delete this.cpuChart,delete this.gpuChart}updateNetworkInterface(e){this.selectedNetworkInterface=this.interfacesOptsEl.selectedIndex,this.update()}bytesToMbString(e){return(e/1024/1024).toFixed(1)+" MB"}getTimestampForGraph(){const e=new Date;return`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}},DialServer:class extends S{constructor(e,t){super(e,t),this.dialListenerStart=this.api.t.on("DIALServer","start",e=>{this.dialMessage("start",e)}),this.dialListenerStop=this.api.t.on("DIALServer","stop",e=>{this.dialMessage("stop",e)})}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Received DIAL requests:\n        </div>\n\n        <div id="statusMessages" class="text grid__col grid__col--8-of-8"></div>',this.statusMessagesEl=document.getElementById("statusMessages")}dialMessage(e,t){let n=document.createElement("div");"stop"===e&&(n.className="red");let i=document.createElement("span");i.innerHTML=`${e} :: ${t.application} - ${t.parameters}`,n.appendChild(i),this.statusMessagesEl.appendChild(n)}close(){this.dialListenerStart&&"function"==typeof this.dialListenerStart.dispose&&this.dialListenerStart.dispose(),this.dialListenerStop&&"function"==typeof this.dialListenerStop.dispose&&this.dialListenerStop.dispose()}},LocationSync:class extends S{constructor(e,t){super(e,t),this.renderInMenu=!0,this.displayName="Location"}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n          Location\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n          City\n        </div>\n        <div id="city" class="text grid__col grid__col--6-of-8">\n          -\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n          Country\n        </div>\n        <div id="country" class="text grid__col grid__col--6-of-8">\n          -\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n          Region\n        </div>\n        <div id="region" class="text grid__col grid__col--6-of-8">\n          -\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n          Timezone\n        </div>\n        <div id="timezone" class="text grid__col grid__col--6-of-8">\n          -\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n          Public IP\n        </div>\n        <div id="publicip" class="text grid__col grid__col--6-of-8">\n          -\n        </div>\n\n        <div id="syncLabel" class="label grid__col grid__col--2-of-8">\n          Sync\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n          <button type="button" id="syncButton" onclick="">Sync</button>\n        </div>',document.getElementById("syncButton").onclick=this.syncLocation.bind(this),this.cityEl=document.getElementById("city"),this.countryEl=document.getElementById("country"),this.regionEl=document.getElementById("region"),this.timezoneEl=document.getElementById("timezone"),this.publicIpEl=document.getElementById("publicip"),this.update()}syncLocation(){const e={method:"PUT",path:`${this.callsign}`},t={plugin:this.callsign,method:"sync"};this.api.req(e,t).then(()=>{this.update()})}location(){const e={method:"GET",path:`${this.callsign}`},t={plugin:this.callsign,method:"location"};return this.api.req(e,t)}update(){this.location().then(e=>{this.cityEl.innerHTML=e.city,this.countryEl.innerHTML=e.country,this.regionEl.innerHTML=e.region,this.timezoneEl.innerHTML=e.timezone,this.publicIpEl.innerHTML=e.publicip})}},IOConnector:class extends S{constructor(e,t){super(e,t)}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            IOConnector\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            PIN\n        </div>\n        <div id="pin" class="text grid__col grid__col--1-of-8">\n            <input type="text" id="pinInput" size="2"/>\n        </div>\n        <div class="text grid__col grid__col--5-of-8">\n            <button type="button" id="get">Get</button>\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Value\n        </div>\n        <div id="value" class="text grid__col grid__col--1-of-8">\n            <input type="text" id="valueInput" size="2"/>\n        </div>\n        <div class="text grid__col grid__col--5-of-8">\n            <button type="button" id="set">Set</button>\n        </div>',this.pinEl=document.getElementById("pinInput"),this.valueEl=document.getElementById("valueInput"),document.getElementById("get").onclick=this.getPin.bind(this),document.getElementById("set").onclick=this.setPin.bind(this)}pin(e,t){const n={plugin:this.callsign,method:`pin@${e}`};return""!==t&&(n.params=t),this.api.req(null,n)}getPin(){let e=this.pinEl.value;this.pin(e).then(e=>{this.valueEl.value=e})}setPin(){let e=this.pinEl.value,t=this.valueEl.value;this.pin(e,t)}},Monitor:L,Netflix:B,NetworkControl:class extends S{constructor(e,t){super(e,t),this.renderInMenu=!0,this.displayName="Network",this.selectedNetworkInterface=0,this.networks=[]}render(){document.getElementById("main").innerHTML='\n          <div class="title grid__col grid__col--8-of-8">\n            Network Control\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Network Interface\n          </div>\n          <div class="text grid__col grid__col--6-of-8">\n            <select id="NetworkInterface">\n            </select>\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            mode\n          </div>\n          <div id="mode" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div id="ipSettings" style="display: none">\n            <div class="label grid__col grid__col--2-of-8">\n              IP Address\n            </div>\n            <div id="ip" class="text grid__col grid__col--6-of-8">\n              -\n            </div>\n            <div class="label grid__col grid__col--2-of-8">\n              Broadcast\n            </div>\n            <div id="broadcast" class="text grid__col grid__col--6-of-8">\n              -\n            </div>\n            <div class="label grid__col grid__col--2-of-8">\n              Gateway\n            </div>\n            <div id="gateway" class="text grid__col grid__col--6-of-8">\n              -\n            </div>\n            <div class="label grid__col grid__col--2-of-8">\n              mask\n            </div>\n            <div id="mask" class="text grid__col grid__col--6-of-8">\n              -\n            </div>\n          </div>\n\n          <div id="syncLabel" class="label grid__col grid__col--2-of-8">\n            Control\n          </div>\n          <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="reload" onclick="">Reload</button>\n            <button type="button" id="request" onclick="">Request</button>\n            \x3c!-- <button type="button" id="assign" onclick="">Assign</button> --\x3e\n            <button type="button" id="flush" onclick="">Flush</button>\n          </div>',this.interfacesOptsEl=document.getElementById("NetworkInterface"),this.interfacesOptsEl.onchange=this.updateNetworkInterface.bind(this),document.getElementById("reload").onclick=this.reload.bind(this);document.getElementById("request");request.onclick=this.request.bind(this),document.getElementById("flush").onclick=this.flush.bind(this),this.ipEl=document.getElementById("ip"),this.broadcastEl=document.getElementById("broadcast"),this.gatewayEl=document.getElementById("gateway"),this.maskEl=document.getElementById("mask"),this.modeEl=document.getElementById("mode"),this.networkListener=this.api.t.on("NetworkControl","networkupdate",e=>{console.log("NETWORK NOT",e),this.update()}),this.update()}network(){const e={method:"GET",path:`${this.callsign}`},t={plugin:this.callsign,method:"network"};return this.api.req(e,t)}reload(){let e=this._addresses[this.interfacesOptsEl.selectedIndex].interface;const t={method:"PUT",path:`${this.callsign}/${e}/Reload`},n={plugin:this.callsign,method:"reload",params:{device:e}};return this.api.req(t,n)}request(){let e=this._addresses[this.interfacesOptsEl.selectedIndex].interface;const t={method:"PUT",path:`${this.callsign}/${e}/Request`},n={plugin:this.callsign,method:"request",params:{device:e}};return this.api.req(t,n)}assign(){let e=this._addresses[this.interfacesOptsEl.selectedIndex].interface;const t={method:"PUT",path:`${this.callsign}/${e}/Assign`},n={plugin:this.callsign,method:"assign",params:{device:e}};return this.api.req(t,n)}flush(){let e=this._addresses[this.interfacesOptsEl.selectedIndex].interface;const t={method:"PUT",path:`${this.callsign}/${e}/Flush`},n={plugin:this.callsign,method:"flush",params:{device:e}};return this.api.req(t,n)}update(){this.network().then(e=>{let t=e.addresses?e.addresses:e;this._addresses=t,this.interfacesOptsEl.innerHTML="";for(var n=0;n<t.length;n++){this.interfacesOptsEl.appendChild(document.createElement("option")).innerHTML=t[n].interface}this.interfacesOptsEl.selectedIndex=this.selectedNetworkInterface;let i=this._addresses[this.selectedNetworkInterface];this.modeEl.innerHTML=i.mode,"Dynamic"!==i.mode?(document.getElementById("ipSettings").style.display="block",this.ipEl.innerHTML=i.address,this.broadcastEl.innerHTML=i.broadcast,this.gatewayEl.innerHTML=i.gateway,this.maskEl.innerHTML=i.mask):document.getElementById("ipSettings").style.display="none"})}updateNetworkInterface(e){this.selectedNetworkInterface=this.interfacesOptsEl.selectedIndex,this.update()}close(){this.networkListener&&"function"==typeof this.networkListener.dispose&&this.networkListener.dispose()}},OCDM:class extends S{constructor(e,t){super(e,t),this.ocdmTemplate='<div class="label grid__col grid__col--2-of-8">\n            {{Name}}\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            {{Designators}}\n        </div>'}drms(){const e={method:"GET",path:this.callsign},t={plugin:this.callsign,method:"drms"};return this.api.req(e,t)}keysystems(e){const t={method:"GET",path:this.callsign},n={plugin:this.callsign,method:`keysystems@${e}`};return this.api.req(t,n)}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            OpenCDM Systems\n        </div>\n        <div id="systemDiv"></div>',this.systemDiv=document.getElementById("systemDiv"),this.update()}update(){this.drms().then(e=>{if(null==e)return;let t=e.systems?e.systems:e;for(let e=0;e<t.length;e++){let n=t[e],i=n.designators?n.designators:n.keysystems,s=this.ocdmTemplate.replace("{{Name}}",n.name);s=s.replace("{{Designators}}",i.toString()),this.systemDiv.innerHTML+=s}})}},Power:class extends S{constructor(e,t){super(e,t),this.mainDiv=document.getElementById("main"),this.state=1,this.stateLookup={1:"On",2:"Active standby",3:"Passive standby",4:"Suspend to Ram",5:"Hibernate",6:"Power Off"}}state(){const e={method:"GET",path:`${this.callsign}/State`},t={plugin:this.callsign,method:"state"};return this.api.req(e,t)}render(){this.mainDiv.innerHTML='\n        <div class="label grid__col grid__col--2-of-8">\n            Current State\n        </div>\n        <div id="powerState" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            <label for="number">Timeout (seconds)</label>\n        </div>\n        <div class="text grid__col grid__col--2-of-8">\n            <input type="number" id="timeout" size="4" value="" />\n        </div>\n        <div class="grid__col grid__col--4-of-8"></div>\n\n        <div class="label grid__col grid__col--2-of-8">Change state</div>\n        <div class="text grid__col grid__col--2-of-8">\n            <select id="stateSelector"></select>\n        </div>',this.powerStateDiv=document.getElementById("powerState"),this.stateSelectorEl=document.getElementById("stateSelector"),this.timeoutInput=document.getElementById("timeout"),this.stateSelectorEl.onchange=this.changeState.bind(this);var e=Object.keys(this.stateLookup);if(0===this.stateSelectorEl.children.length)for(var t=0;t<e.length;t++){var n=document.createElement("option");n.text=this.stateLookup[e[t]],n.value=e[t],this.stateSelectorEl.appendChild(n)}this.update()}update(e){this.state().then(e=>{void 0!==e.PowerState&&(this.powerStateDiv.innerHTML=this.stateLookup[e.PowerState],this.stateSelectorEl.children[e.PowerState-1].selected=!0)})}changeState(e){const t={method:"POST",path:`${this.callsign}/State`,body:{PowerState:this.stateSelectorEl.value}},n={plugin:this.callsign,method:"state",params:{powerstate:this.stateSelectorEl.value}};""!==this.timeoutInput.value&&(t.body.Timeout=this.timeoutInput.value,n.body.timeout=this.timeoutInput.value),this.api.req(t).then(()=>{e<2&&setTimeout(this.update,5e3)})}},Provisioning:class extends S{constructor(e,t){super(e,t)}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n        Provisioning status\n      </div>\n\n      <div class="label grid__col grid__col--2-of-8">\n        Device\n      </div>\n      <div id="device" class="text grid__col grid__col--6-of-8">\n        -\n      </div>\n      <div class="label grid__col grid__col--2-of-8">\n        Provisioned for\n      </div>\n      <div id="provisioning-tokens" class="text grid__col grid__col--6-of-8">\n        -\n      </div>\n      <div class="label grid__col grid__col--2-of-8">\n        Status\n      </div>\n      <div id="status" class="text grid__col grid__col--6-of-8">\n        -\n      </div>\n\n      <div id="provisionLabel" class="label grid__col grid__col--2-of-8">\n        Provisioning\n      </div>\n      <div class="text grid__col grid__col--6-of-8">\n        <button type="button" id="provisionButton" onclick="tiggerProvisioningRequest()">Request</button>\n      </div>',document.getElementById("provisionButton").onclick=this.tiggerProvisioningRequest.bind(this),this.update()}triggerProvisioning(){const e={method:"PUT",path:`${this.callsign}`},t={plugin:this.callsign,method:"provision"};return this.api.req(e,t)}status(){const e={method:"GET",path:this.callsign},t={plugin:this.callsign,method:"state"};return this.api.req(e,t)}update(){this.status().then(e=>{if(null!=e&&""!==e){var t=e.id,n=e.tokens||[],i=e.status;document.getElementById("device").innerHTML=t,document.getElementById("status").innerHTML=200==i?"provisioned":"not provisioned",200==i&&n.length>0&&(document.getElementById("provisioning-tokens").innerHTML=n.join(", ")),document.getElementById("provisionLabel").style.display=200==i?"none":null}}).catch(e=>{console.error(e),this.status(e)})}tiggerProvisioningRequest(){var e=this;this.triggerProvisioning().then(t=>{document.getElementById("provisionButton").style.display="none",document.getElementById("provisionLabel").style.display="none",setTimeout(e.update(),3e3)})}},RemoteControl:class extends S{constructor(e,t){super(e,t),this.displayName="Remote Control",this.onScreenKeyBoardIsRendered=!1,this.doNotHandleKeys=!1,this.devicesThatSupportPairing=["GreenPeakRF4CE","GreenPeak","RF4CE"],this.autoFwdKeys=window.localStorage.getItem("autoFwdKeys"),this.automaticallyForwardKeys="false"!==this.autoFwdKeys,this.keyMapping={1:{code:"0x0021",color:void 0,string:"1"},2:{code:"0x0022",color:void 0,string:"2"},3:{code:"0x0023",color:void 0,string:"3"},4:{code:"0x0024",color:void 0,string:"4"},5:{code:"0x0025",color:void 0,string:"5"},6:{code:"0x0026",color:void 0,string:"6"},7:{code:"0x0027",color:void 0,string:"7"},8:{code:"0x0028",color:void 0,string:"8"},9:{code:"0x0029",color:void 0,string:"9"},0:{code:"0x0020",color:void 0,string:"0"},exit:{code:"0x0009",color:"blue",string:"exit"},a:{code:"0x8004",color:void 0,string:"a"},b:{code:"0x8005",color:void 0,string:"b"},c:{code:"0x8006",color:void 0,string:"c"},d:{code:"0x8007",color:void 0,string:"d"},e:{code:"0x8008",color:void 0,string:"e"},f:{code:"0x8009",color:void 0,string:"f"},g:{code:"0x800A",color:void 0,string:"g"},h:{code:"0x800B",color:void 0,string:"h"},i:{code:"0x800C",color:void 0,string:"i"},back:{code:"0x0032",color:"blue double",string:"back"},j:{code:"0x800D",color:void 0,string:"j"},k:{code:"0x800E",color:void 0,string:"k"},l:{code:"0x800F",color:void 0,string:"l"},m:{code:"0x8010",color:void 0,string:"m"},n:{code:"0x8011",color:void 0,string:"n"},o:{code:"0x8012",color:void 0,string:"o"},p:{code:"0x8013",color:void 0,string:"p"},q:{code:"0x8014",color:void 0,string:"q"},r:{code:"0x8015",color:void 0,string:"r"},up:{code:"0x0001",color:"blue",string:"up",div:'<div class="fa fa-caret-up"></div>'},ok:{code:"0x002B",color:"blue",string:"ok"},s:{code:"0x8016",color:void 0,string:"s"},t:{code:"0x8017",color:void 0,string:"t"},u:{code:"0x8018",color:void 0,string:"u"},v:{code:"0x8019",color:void 0,string:"v"},w:{code:"0x801A",color:void 0,string:"w"},x:{code:"0x801B",color:void 0,string:"x"},y:{code:"0x801C",color:void 0,string:"y"},z:{code:"0x801D",color:void 0,string:"z"},left:{code:"0x0003",color:"blue",string:"left",div:'<div class="fa fa-caret-left"></div>'},down:{code:"0x0002",color:"blue",string:"down",div:'<div class="fa fa-caret-down"></div>'},right:{code:"0x0004",color:"blue",string:"right",div:'<div class="fa fa-caret-right"></div>'}},this.jsToWpeKeyMap={13:{code:"0x002B",string:"enter"},37:{code:"0x0003",string:"left"},38:{code:"0x0001",string:"up"},39:{code:"0x0004",string:"right"},40:{code:"0x0002",string:"down"},27:{code:"0x0009",string:"esc"},8:{code:"0x0032",string:"backspace"},48:{code:"0x0020",string:"0"},49:{code:"0x0021",string:"1"},50:{code:"0x0022",string:"2"},51:{code:"0x0023",string:"3"},52:{code:"0x0024",string:"4"},53:{code:"0x0025",string:"5"},54:{code:"0x0026",string:"6"},55:{code:"0x0027",string:"7"},56:{code:"0x0028",string:"8"},57:{code:"0x0029",string:"9"},33:{code:"0x0030",string:"page up"},34:{code:"0x0031",string:"page down"},65:{code:"0x8004",string:"a"},66:{code:"0x8005",string:"b"},67:{code:"0x8006",string:"c"},68:{code:"0x8007",string:"d"},69:{code:"0x8008",string:"e"},70:{code:"0x8009",string:"f"},71:{code:"0x800A",string:"g"},72:{code:"0x800B",string:"h"},73:{code:"0x800C",string:"i"},74:{code:"0x800D",string:"j"},75:{code:"0x800E",string:"k"},76:{code:"0x800F",string:"l"},77:{code:"0x8010",string:"m"},78:{code:"0x8011",string:"n"},79:{code:"0x8012",string:"o"},80:{code:"0x8013",string:"p"},81:{code:"0x8014",string:"q"},82:{code:"0x8015",string:"r"},83:{code:"0x8016",string:"s"},84:{code:"0x8017",string:"t"},85:{code:"0x8018",string:"u"},86:{code:"0x8019",string:"v"},87:{code:"0x801A",string:"w"},88:{code:"0x801B",string:"x"},89:{code:"0x801C",string:"y"},90:{code:"0x801D",string:"z"},46:{code:"0x802A",string:"delete"},32:{code:"0x802C",string:"space"},189:{code:"0x802D",string:"-"},187:{code:"0x802E",string:"="},220:{code:"0x8031",string:"\\"},186:{code:"0x8033",string:";"},222:{code:"0x8034",string:"`"},188:{code:"0x8036",string:","},190:{code:"0x8037",string:"."},191:{code:"0x8038",string:"/"}},this.addKeyboardButton(),this.keyboardDiv=document.getElementById("keyboard"),this.keyBoardInnerDiv=document.createElement("div"),this.keyBoardInnerDiv.id="keyboard-inner";for(var n=Object.keys(this.keyMapping),i=0;i<n.length;i++){var s=this.keyMapping[n[i]],o=n[i],l=document.createElement("div");l.className="button "+(s.color||""),void 0!==s.div?l.innerHTML=s.div:l.innerHTML=o,l.onclick=this.handleKey.bind(this,o),this.keyBoardInnerDiv.appendChild(l)}window.addEventListener("keyup",this.handleKeyFromJs.bind(this,!1)),window.addEventListener("keydown",this.handleKeyFromJs.bind(this,!0))}sendKey(e){var t={device:"Web",code:e};const n={method:"PUT",path:"RemoteControl/Web/Send",body:t},i={plugin:"RemoteControl",method:"send",params:t};return this.api.req(n,i)}sendKeyPress(e){var t={device:"Web",code:e};const n={method:"PUT",path:"RemoteControl/Web/Press",body:t},i={plugin:"RemoteControl",method:"press",params:t};return this.api.req(n,i)}sendKeyRelease(e){var t={device:"Web",code:e};const n={method:"PUT",path:"RemoteControl/Web/Release",body:t},i={plugin:"RemoteControl",method:"release",params:t};return this.api.req(n,i)}renderKey(e){var t=document.getElementById("keyPressed");null!==t&&(t.innerHTML=e);var n=document.getElementById("remoteControlKeyPressed");null!==n&&(n.innerHTML=e)}handleKeyFromJs(e,t){if(!0!==this.doNotHandleKeys&&!t.repeat&&!1!==this.automaticallyForwardKeys){var n=this.jsToWpeKeyMap[t.which];void 0!==n&&(this.renderKey(n.string),e?this.sendKeyPress(n.code):this.sendKeyRelease(n.code))}}handleKey(e){var t=this.keyMapping[e];void 0!==t&&(this.renderKey(t.string),this.sendKey(t.code))}addKeyboardButton(){var e=document.getElementById("header");if(null!==e){var t=document.createElement("div");t.id="button-right",t.className="fa fa-keyboard-o right",t.onclick=this.showKeyboard.bind(this),e.appendChild(t)}else setTimeout(this.addKeyboardButton.bind(this),500)}showKeyboard(){!0===this.onScreenKeyBoardIsRendered?this.closeKeyboard():this.renderKeyboard()}closeKeyboard(){this.keyboardDiv.innerHTML="",this.onScreenKeyBoardIsRendered=!1}renderKeyboard(){this.keyboardDiv.appendChild(this.keyBoardInnerDiv),this.keyboardDiv.style.bottom="0px",this.onScreenKeyBoardIsRendered=!0}close(){document.getElementById("main").innerHTML=""}activatePairing(e){const t={method:"PUT",path:`RemoteControl/${e}/Pair`},n={plugin:"RemoteControl",method:"pair",params:{device:e}};return this.api.req(t,n)}devices(){return this.api.req({method:"GET",path:"RemoteControl"},{plugin:"RemoteControl",method:"devices"})}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Device\n          </div>\n\n          <div class="label grid__col grid__col--2-of-8">\n            Key\n          </div>\n          <div id="remoteControlKeyPressed" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n\n          <div class="label grid__col grid__col--2-of-8">\n            Remotes\n          </div>\n          <div id="remotesList" class="text grid__col grid__col--6-of-8"></div>\n\n          <div id="pairingDiv"></div>\n\n          <div class="label grid__col grid__col--2-of-8">\n            <label for="autofwd">Auto forward keys</label>\n          </div>\n          <div class="grid__col grid__col--6-of-8 " id="autofwdDiv">\n            <div class="checkbox">\n                <input type="checkbox" id="autoFwdCheckbox"></input>\n                <label for="autoFwdCheckbox"></label>\n            </div>\n           </div>';var e=this;this.autoFwdCheckboxEl=document.getElementById("autoFwdCheckbox"),this.autoFwdCheckboxEl.checked=this.automaticallyForwardKeys,this.autoFwdCheckboxEl.onclick=this.toggleAutoforwardOfKeys.bind(this),this.devices().then(t=>{if(void 0!==t)for(var n=void 0!==t.devices?t.devices:t,i=document.getElementById("remotesList"),s=document.getElementById("pairingDiv"),o=0;o<n.length;o++){var l=n[o];if(i.innerHTML+=""+l,o<n.length-1&&(i.innerHTML+=", "),-1!=e.devicesThatSupportPairing.indexOf(l))""===s.innerHTML&&(s.innerHTML+='<div class="title grid__col grid__col--8-of-8">\n                          Pairing\n                        </div>'),s.innerHTML+=`<div class="label grid__col grid__col--2-of-8">${l}</div>\n                        <div class="text grid__col grid__col--6-of-8">\n                            <button type="button" id="${l}-PairingMode">Enable Pairing</button>\n                        </div>`,document.getElementById(l+"-PairingMode").onclick=e.activatePairing.bind(e,l)}})}toggleAutoforwardOfKeys(){this.automaticallyForwardKeys=!0!==this.automaticallyForwardKeys,window.localStorage.setItem("autoFwdKeys",this.automaticallyForwardKeys)}},Snapshot:class extends S{constructor(e,t){super(e,t)}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Create\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Snapshot\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button id="snapshotButton" type="button">CREATE</button>\n        </div>\n\n        <div id="myOutput">\n            <img id="snapshotOutput" />\n        </div>',document.getElementById("snapshotButton").onclick=this.createSnapshot.bind(this)}getSnapshotLocator(){return this.api.getURLStart("http")+"Snapshot/Capture?"+(new Date).getTime()}createSnapshot(){var e=document.getElementById("snapshotOutput");e.src="",e.src=this.getSnapshotLocator()}},Spark:class extends S{constructor(e,t){super(e,t),this.url="",this.isHidden=!1,this.isSuspended=!1,this.lastSetUrlKey="lastSetUrl"+this.callsign,this.lastSetUrl=window.localStorage.getItem(this.lastSetUrlKey)||"",this.template='<div id="content_{{callsign}}" class="grid">\n\n            <div class="title grid__col grid__col--8-of-8">Presets / URL</div>\n\n            <div class="label grid__col grid__col--2-of-8">\n                <label for="{{callsign}}_url">Custom URL</label>\n            </div>\n            <div class="text grid__col grid__col--6-of-8">\n                <input type="text" id="{{callsign}}_url" size="20"/>\n                <button id="{{callsign}}_button" type="button">SET</button>\n            </div>\n\n            <div class="label grid__col grid__col--2-of-8">URL presets</div>\n            <div class="text grid__col grid__col--6-of-8">\n                <select id="{{callsign}}_linkPresets"></select>\n            </div>\n\n            <div class="title grid__col grid__col--8-of-8">Tools</div>\n\n            <div class="label grid__col grid__col--2-of-8">Current State</div>\n                <div id="{{callsign}}StateInfo" class="text grid__col grid__col--6-of-8"></div>\n                <div class="label grid__col grid__col--2-of-8"></div>\n                <div class="label grid__col grid__col--6-of-8">\n                    <button id="{{callsign}}SuspendButton" type="button"></button>\n            </div>\n\n            <div class="label grid__col grid__col--2-of-8">Visibility</div>\n            <div id="{{callsign}}VisibilityStateInfo" class="text grid__col grid__col--6-of-8"></div>\n            <div class="label grid__col grid__col--2-of-8"></div>\n            <div class="text grid__col grid__col--6-of-8">\n                <button type="button" id="{{callsign}}VisibilityButton">HIDE</button>\n            </div>\n        </div>',this.presets=[{Name:"Select a preset",URL:""},{Name:"http://www.sparkui.org/examples/gallery/picturepile.js",URL:"http://www.sparkui.org/examples/gallery/picturepile.js"},{Name:"http://www.sparkui.org/examples/gallery/gallery.js",URL:"http://www.sparkui.org/examples/gallery/gallery.js"}],this.sparkUrlListener=this.api.t.on("Spark","urlchange",e=>{e.url&&e.loaded&&(this.url=e.url,this.handleNotification())}),this.sparkVisibilityListener=this.api.t.on("Spark","visibilitychange",e=>{"boolean"==typeof e.hidden&&(this.isHidden=e.hidden,this.handleNotification())}),this.sparkStateListener=this.api.t.on("Spark","statechange",e=>{"boolean"==typeof e.suspended&&(this.isSuspended=e.suspended,this.handleNotification())})}handleNotification(e){!1!==this.rendered&&this.update()}render(){var e=document.getElementById("main"),t=this.template.replace(/{{callsign}}/g,this.callsign);e.innerHTML=t,document.getElementById(this.callsign+"_url").value=this.lastSetUrl,document.getElementById(this.callsign+"_button").onclick=this.getAndSetUrl.bind(this),document.getElementById(this.callsign+"_linkPresets").onchange=this.getAndSetUrlFromPresets.bind(this);var n=document.getElementById(this.callsign+"_linkPresets");if(0===n.children.length)for(var i=0;i<this.presets.length;i++){var s=document.createElement("option");s.text=this.presets[i].Name,s.value=this.presets[i].URL,n.appendChild(s)}window.addEventListener("keydown",this.handleKey.bind(this));var o=document.getElementById(this.callsign+"_url");o.onblur=function(){void 0!==plugins.RemoteControl&&(plugins.RemoteControl.doNotHandleKeys=!1)},o.onfocus=function(){void 0!==plugins.RemoteControl&&(plugins.RemoteControl.doNotHandleKeys=!0)},this.update(),this.rendered=!0}close(){window.removeEventListener("keydown",this.handleKey.bind(this),!1),this.sparkUrlListener&&"function"==typeof this.sparkUrlListener.dispose&&this.sparkUrlListener.dispose(),this.sparkStateListener&&"function"==typeof this.sparkStateListener.dispose&&this.sparkStateListener.dispose(),this.sparkVisibilityListener&&"function"==typeof this.sparkVisibilityListener.dispose&&this.sparkVisibilityListener.dispose(),delete this.socketListenerId,delete this.isHidden,delete this.isSuspended,this.rendered=!1}update(){var e=this.isSuspended?"Suspended":"Resumed",t=this.isSuspended?"Resume":"Suspend";document.getElementById(this.callsign+"StateInfo").innerHTML=e;var n=document.getElementById(this.callsign+"SuspendButton");n.innerHTML=t.toUpperCase(),n.onclick=this.toggleSuspend.bind(this,t);var i=this.isHidden?"Hidden":"Visible",s=this.isHidden?"Show":"Hide";document.getElementById(this.callsign+"VisibilityStateInfo").innerHTML=i.toUpperCase();var o=document.getElementById(this.callsign+"VisibilityButton");o.innerHTML=s.toUpperCase(),o.onclick=this.toggleVisibility.bind(this,s)}setUrl(e){if(""===e)return;console.log("Setting url "+e+" for "+this.callsign),document.getElementById(this.callsign+"_linkPresets").selectedIndex=0;const t={method:"POST",path:this.callsign+"/URL",body:body},n={plugin:this.callsign,method:"seturl",params:body};this.api.req(t,n)}getAndSetUrl(){this.lastSetUrl=document.getElementById(this.callsign+"_url").value,this.setUrl(this.lastSetUrl),window.localStorage.setItem(this.lastSetUrlKey,this.lastSetUrl)}getAndSetUrlFromPresets(){var e=document.getElementById(this.callsign+"_linkPresets").selectedIndex;e>0&&this.setUrl(this.presets[e].URL)}handleKey(e){var t=document.getElementById(`${this.callsign}_url`);13===e.which&&t&&t===document.activeElement&&this.getAndSetUrl()}toggleSuspend(e){"Resume"===e?this.resume():this.suspend()}toggleVisibility(e){"Show"===e?this.show():this.hide()}},Switchboard:class extends S{constructor(e,t){super(e,t),this.defaultPlugin=void 0,this.switchablePlugins=[],this.state().then(e=>{this.defaultPlugin=e.default,this.switchablePlugins=e.callsigns})}state(){const e={method:"GET",path:`${this.callsign}/Switch`};return this.api.req(e)}getDefaultSwitchBoardPlugin(){return this.defaultPlugin}getSwitchablePlugins(){return this.switchBoardPlugins}render(){this.mainDiv=document.getElementById("main"),this.mainDiv.innerHTML='\n        <div class="title grid__col grid__col--8-of-8">\n            Plugins\n        </div>\n        <div id="switchBoardPlugins"></div>';var e=document.getElementById("switchBoardPlugins");this.api.getControllerPlugins().then(t=>{for(var n=t.plugins,i=0;i<n.length;i++){var s=n[i],o=s.callsign;if(-1!==this.switchablePlugins.indexOf(o)){var l=document.createElement("div");l.className="label grid__col grid__col--2-of-8",e.appendChild(l);var d=document.createElement("label");d.innerHTML=o,o===this.defaultPlugin&&(d.innerHTML+=" (default)"),d.setAttribute("for",o),l.appendChild(d);var r=document.createElement("div");r.className="grid__col grid__col--6-of-8 ",r.id=o+"MainDiv",e.appendChild(r);var a=document.createElement("div");a.className="checkbox",r.appendChild(a);var c=document.createElement("input");c.type="checkbox",c.id=o,c.setAttribute("disabled","true"),a.appendChild(c);var h=document.createElement("label");if(h.setAttribute("for",o),a.appendChild(h),"activated"!=s.state&&"resumed"!=s.state&&"suspended"!=s.state||(c.checked=!0),"resumed"!==s.state){var u=document.createElement("div");u.id=o+"switchdiv",u.className="suspend";var g=document.createElement("input");g.type="checkbox",g.id=o+"switch","activated"!=s.state&&"resumed"!=s.state||(g.checked=!0),g.onclick=this.switchPlugin.bind(this,o),u.appendChild(g);var p=document.createElement("label");p.setAttribute("for",o+"switch"),p.id=o+"switchlabel",p.innerHTML="switch",u.appendChild(p),r.appendChild(u)}}}})}switchPlugin(e){const t={method:"PUT",path:`${this.callsign}/Switch/${e}`};this.api.req(t).then(()=>{this.render()})}},TimeSync:class extends S{constructor(e,t){super(e,t),this.renderInMenu=!0,this.displayName="Time"}render(){document.getElementById("main").innerHTML='\n          <div class="title grid__col grid__col--8-of-8">\n            Time\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Current time\n          </div>\n          <div id="time" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Source\n          </div>\n          <div id="source" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n          <div class="label grid__col grid__col--2-of-8">\n            Last synced\n          </div>\n          <div id="synced" class="text grid__col grid__col--6-of-8">\n            -\n          </div>\n\n          <div class="label grid__col grid__col--2-of-8">\n              <label for="settime">Set time</label>\n            </div>\n          <div class="text grid__col grid__col--6-of-8">\n              <input type="text" id="timeinput" size="20"/>\n              <button id="setTime" type="button">SET</button>\n          </div>\n\n          <div id="syncLabel" class="label grid__col grid__col--2-of-8">\n            Control\n          </div>\n          <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="sync" onclick="">Sync</button>\n          </div>',document.getElementById("setTime").onclick=this.setTime.bind(this),document.getElementById("sync").onclick=this.synchronizeTime.bind(this),this.timeEl=document.getElementById("time"),this.sourceEl=document.getElementById("source"),this.syncedEl=document.getElementById("synced"),this.timesyncListener=this.api.t.on("TimeSync","update",e=>{console.log("TIME NOT",e),this.update()}),this.update()}synchronizeTime(){this.syncTime().then(this.synchronize())}synchronize(){const e={plugin:this.callsign,method:"synchronize"};return this.api.req(null,e)}syncTime(){const e={plugin:this.callsign,method:"synctime"};return this.api.req(null,e)}setTime(){let e=document.getElementById("timeinput").value;const t={method:"POST",path:`${this.callsign}`,body:{time:e}},n={plugin:this.callsign,method:"time",params:e};return this.api.req(t,n)}getTime(){const e={method:"GET",path:`${this.callsign}`},t={plugin:this.callsign,method:"time"};return this.api.req(e,t)}update(){this.getTime().then(e=>{this.timeEl.innerHTML=e,this.syncTime().then(e=>{this.sourceEl.innerHTML=e.source,this.syncedEl.innerHTML=e.time})})}close(){this.timesyncListener&&"function"==typeof this.timesyncListener.dispose&&this.timesyncListener.dispose()}},TraceControl:class extends S{constructor(e,t){super(e,t),this.displayName="Tracing",this.selectedTraceModule=void 0,this.traceModules=void 0,this.uniqueTraceModules=void 0}toggleTracing(e,t,n){const i={method:"PUT",path:"TraceControl/"+e+"/"+t+"/"+n},s={plugin:"TraceControl",method:"set",params:{module:e,category:t,state:"on"===n?"enabled":"disabled"}};return this.api.req(i,s)}render(){var e=this;document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Modules\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            <label for="modules">Modules</label>\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <select id="tracingModules"></select>\n        </div>\n\n        <div id="tracing_div"></div>',document.getElementById("tracingModules").onchange=this.getSelectedModuleAndShowCategories.bind(this),this.status().then(t=>{e.traceModules=t.settings?t.settings:[],e.uniqueTraceModules=[];var n=document.getElementById("tracingModules");n.getElementsByTagName("options");if(n.options.length=0,void 0!==e.traceModules){for(var i=0;i<e.traceModules.length;i++)if(-1===e.uniqueTraceModules.indexOf(e.traceModules[i].module)){e.uniqueTraceModules.push(e.traceModules[i].module);var s=document.createElement("option");s.innerHTML=e.traceModules[i].module,e.traceModules[i].module===e.selectedTraceModule&&(s.selected=!0),n.appendChild(s)}void 0===e.selectedTraceModule&&(e.selectedTraceModule=e.traceModules[0].module),e.showTraceCategories(e.selectedTraceModule)}})}getSelectedModuleAndShowCategories(){var e=document.getElementById("tracingModules"),t=this.uniqueTraceModules[e.selectedIndex];this.showTraceCategories(t)}showTraceCategories(e){var t=document.getElementById("tracing_div");if(t.innerHTML="",0!==this.traceModules.length){this.selectedTraceModule=e;for(var n=0;n<this.traceModules.length;n++){var i=this.traceModules[n];if(i.module===e){var s=document.createElement("div");s.className="label grid__col grid__col--2-of-8",t.appendChild(s);var o=document.createElement("label");o.innerHTML=i.category,o.setAttribute("for",i.category),s.appendChild(o);var l=document.createElement("div");l.className="grid__col grid__col--6-of-8",t.appendChild(l);var d=document.createElement("div");d.className="checkbox",l.appendChild(d);var r=document.createElement("input");r.type="checkbox",r.id=i.category,r.checked=void 0!==i.state&&"enabled"===i.state,r.onclick=this.toggleTrace.bind(this,i),d.appendChild(r);var a=document.createElement("label");a.setAttribute("for",i.category),d.appendChild(a)}}}}toggleTrace(e){this.toggleTracing(e.module,e.category,"enabled"===e.state?"off":"on"),e.state="enabled"===e.state?"disabled":"enabled"}},VolumeControl:class extends S{constructor(e,t){super(e,t)}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Volume\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Muted\n        </div>\n        <div id="muted" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Volume level\n        </div>\n        <div id="volume" class="text grid__col grid__col--6-of-8">\n            -\n        </div>\n\n        <div id="provisionLabel" class="label grid__col grid__col--2-of-8">\n            Control\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="volumeUp">Up</button>\n            <button type="button" id="volumeDown">Down</button>\n            <button type="button" id="muteBtn">Mute</button>\n        </div>',this.mutedEl=document.getElementById("muted"),this.volumeEl=document.getElementById("volume"),this.muteBtn=document.getElementById("muteBtn"),document.getElementById("volumeUp").onclick=this.volumeChange.bind(this,10),document.getElementById("volumeDown").onclick=this.volumeChange.bind(this,-10),muteBtn.onclick=this.mute.bind(this),this.update()}update(){this.muted().then(e=>{this.mutedEl.innerHTML=e,muteBtn.innerHTML=e?"Unmute":"Mute"}),this.volume().then(e=>{this.volumeEl.innerHTML=e})}muted(e){const t={plugin:this.callsign,method:"muted"};return void 0!==e&&(t.params=e),this.api.req(null,t)}volume(e){const t={plugin:this.callsign,method:"volume"};return void 0!==e&&(t.params=e),this.api.req(null,t)}volumeChange(e){this.volume().then(t=>{this.volume(t+e).then(this.update())})}mute(){this.muted().then(e=>{this.muted(!e).then(this.update())})}},WebKitBrowser:T,WebShell:class extends S{constructor(e,t){super(e,t),this.webShellSocket=void 0}render(){var e=this;document.getElementById("main").innerHTML='<div id="shellHeader">WebShell</div>\n        <div id="shell">\n            <pre id="webShellData" class="text"></pre>\n        </div>\n        <div id="hashtag">#</div><input type="text" id="webShellInput" autofocus />',this.api.startWebShell((function(t,n){e.webShellSocket=n,e.webShellSocket.onmessage=function(e){var t=new FileReader;t.onload=function(){document.getElementById("webShellData").innerHTML=String.fromCharCode.apply(null,new Uint8Array(t.result))},t.readAsArrayBuffer(e.data)},e.webShellSocket.onclose=function(){e.webShellSocket=null,e.render()}})),void 0!==plugins.RemoteControl&&(plugins.RemoteControl.doNotHandleKeys=!0),window.addEventListener("keydown",this.handleKey.bind(this))}close(){void 0!==plugins.RemoteControl&&(plugins.RemoteControl.doNotHandleKeys=!1),window.removeEventListener("keydown",this.handleKey.bind(this),!1)}handleKey(e){if(this.webShellSocket&&13===e.which){for(var t=document.getElementById("webShellInput").value+" \n",n=new ArrayBuffer(2*t.length),i=new Uint8Array(n),s=0,o=t.length;s<o;s++)i[s]=t.charCodeAt(s);document.getElementById("webShellInput").value="",this.webShellSocket.send(n)}setTimeout((function(){var e=document.getElementById("shell"),t=document.getElementById("webShellData");e.scrollTop=t.scrollHeight}),50)}},WifiControl:class extends S{constructor(e,t){super(e,t),this.displayName="WiFi",this.configs=[],this.networks=[],this.connecting=!1,this.connected=void 0,this.scanning=!1,this.statusMessageTimer=null,this.rendered=!1,this.wlanInterface="wlan0",this.wifiScanListener=this.api.t.on("WifiControl","scanresults",e=>{!0===this.rendered&&this.getNetworks()}),this.wifiConnectionListener=this.api.t.on("WifiControl","connectionchange",e=>{this.connected=e.connected,!0===this.rendered&&this.update()})}render(){document.getElementById("main").innerHTML='<div class="title grid__col grid__col--8-of-8">\n            Status\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Connected to\n        </div>\n        <div id="Wifi_Connected" class="text grid__col grid__col--6-of-8"></div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Scanning\n        </div>\n        <div id="Wifi_Scanning" class="text grid__col grid__col--6-of-8">\n            False\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Wireless networks\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <select id="Wifi_WirelessNetwork"></select>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="Wifi_scanForNetworksButton">Scan for networks</button>\n        </div>\n\n        <div class="title grid__col grid__col--8-of-8">\n            Configs\n        </div>\n\n        <div class="label grid__col grid__col--2-of-8">\n            Configs\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <select id="Wifi_Configs"></select>\n        </div>\n\n        <div id="Wifi_SSID_Label" class="label grid__col grid__col--2-of-8">\n            SSID\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="Wifi_SSID" type="text" name="SSID"/>\n        </div>\n        <div class="label grid__col grid__col--2-of-8">\n            Mode\n        </div>\n        <div id="Wifi_Mode" class="text grid__col grid__col--6-of-8">\n        </div>\n        \x3c!-- disable for now\n        <div class="label grid__col grid__col--2-of-8"></div>\n        <div class="label grid__col grid__col--6-of-8">\n            <button id="Wifi_ToggleModeButton" type="button">Toggle</button>\n        </div>\n        --\x3e\n        <div class="label grid__col grid__col--2-of-8">\n            Hidden\n        </div>\n        <div id="Wifi_Hidden" class="text grid__col grid__col--6-of-8"></div>\n        <div id="Wifi_Method_Label" class="label grid__col grid__col--2-of-8">\n            Method\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="Wifi_Method" type="text" name="method"/>\n        </div>\n        <div id="Wifi_Password_Label" class="label grid__col grid__col--2-of-8">\n            Password\n        </div>\n        <div class="text grid__col grid__col--6-of-8">\n            <input id="Wifi_Password" type="text" name="password"/>\n        </div>\n        <div class="label grid__col grid__col--2-of-8 toggleButtonLabel">Controls</div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="Wifi_saveButton">Save</button>\n            <button type="button" id="Wifi_deleteButton">Remove</button>\n            <button type="button" id="Wifi_storeButton">Store</button>\n        </div>\n        <div class="label grid__col grid__col--2-of-8 toggleButtonLabel2"></div>\n        <div class="text grid__col grid__col--6-of-8">\n            <button type="button" id="Wifi_connectButton">Connect</button>\n            <button type="button" id="Wifi_disconnectButton">Disconnect</button>\n        </div>\n\n        <br>\n        <div id="statusMessages" class="text grid__col grid__col--8-of-8"></div>\n        ',this.scanButton=document.getElementById("Wifi_scanForNetworksButton"),this.saveButton=document.getElementById("Wifi_saveButton"),this.deleteButton=document.getElementById("Wifi_deleteButton"),this.storeButton=document.getElementById("Wifi_storeButton"),this.connectButton=document.getElementById("Wifi_connectButton"),this.disconnectButton=document.getElementById("Wifi_disconnectButton"),this.scanButton.onclick=this.scanForNetworks.bind(this),this.deleteButton.onclick=this.deleteConfig.bind(this),this.saveButton.onclick=this.saveConfig.bind(this),this.storeButton.onclick=this.storeConfig.bind(this),this.disconnectButton.onclick=this.disconnect.bind(this),this.connectButton.onclick=this.connect.bind(this),this.connectedStatus=document.getElementById("Wifi_Connected"),this.scanningStatus=document.getElementById("Wifi_Scanning"),this.statusMessages=document.getElementById("statusMessages"),this.networkListEl=document.getElementById("Wifi_WirelessNetwork"),this.networkListEl.onchange=this.renderNetworkDetails.bind(this),this.configListEl=document.getElementById("Wifi_Configs"),this.configListEl.onchange=this.renderConfigDetails.bind(this),this.ssidEl=document.getElementById("Wifi_SSID"),this.methodEl=document.getElementById("Wifi_Method"),this.passwordEl=document.getElementById("Wifi_Password"),this.accesspointEl=document.getElementById("Wifi_Mode"),this.hiddenEl=document.getElementById("Wifi_Hidden"),this.update(),setTimeout(this.getNetworks.bind(this),200),setTimeout(this.getConfigs.bind(this),400),this.rendered=!0}update(){this.status().then(e=>{void 0!==e&&(this.connected=e.connected,"boolean"==typeof e.scanning&&(this.scanning=e.scanning),this.renderStatus())})}scanForNetworks(){const e={method:"PUT",path:`${this.callsign}/Scan`},t={plugin:this.callsign,method:"scan"};this.api.req(e,t).then(e=>{this.update(),setTimeout(this.getNetworks.bind(this),5e3)})}getConfigs(){this.update();const e={method:"GET",path:`${this.callsign}/Configs`},t={plugin:this.callsign,method:"configs"};this.api.req(e,t).then(e=>{if(void 0===e)return;let t=e.configs?e.configs:e;if(void 0!==t){this.configs=t,this.configListEl.innerHTML="";for(var n=0;n<t.length;n++){this.configListEl.appendChild(document.createElement("option")).innerHTML=`${t[n].ssid}`}this.renderConfigDetails()}})}getNetworks(){this.update();const e={method:"GET",path:`${this.callsign}/Networks`},t={plugin:this.callsign,method:"networks"};this.api.req(e,t).then(e=>{if(void 0===e)return;if(this.networks=[],!1===this.rendered)return;let t=e.networks?e.networks:e;this.networkListEl.innerHTML="";for(var n=0;n<t.length;n++){if(""!==t[n].ssid)this.networks.push(t[n]),this.networkListEl.appendChild(document.createElement("option")).innerHTML=`${t[n].ssid} (${t[n].signal})`}})}handleNotification(e){if(!1!==this.rendered){this.update();var t=e.data||{};if(t.event&&"Connected"===t.event&&(this.statusMessage("WLAN connection established"),this.update()),"NetworkControl"===t.callsign&&t.data&&t.data.interface)if(t.data.ip)t.data.interface===wlan&&(this.statusMessage("Connection succesfull."),this.joining=!1,this.update());else if(11===t.data.status){if(t.data.interface===this.wlanInterface&&!1===this.joining)return;this.statusMessage("DHCP request failure. Retrying..."),this.requestDHCP()}"boolean"==typeof t.scanning&&(this.scanning=t.scanning,this.renderStatus()),"NetworkUpdate"===t.event&&this.getNetworks()}}statusMessage(e){window.clearTimeout(this.statusMessageTimer),this.statusMessages.innerHTML=e,this.statusMessageTimer=setTimeout(this.statusMessage.bind(this),5e3,"")}renderStatus(){!1!==this.rendered&&(this.connectedStatus.innerHTML=""!==this.connected?this.connected:"Not Connected",this.scanningStatus.innerHTML=!0===this.scanning?"True":"False")}renderNetworkDetails(){var e=this.networkListEl.selectedIndex;this.ssidEl.value="",this.methodEl.value="",e<0||this.networks.length<=0||(this.ssidEl.value=this.networks[e].ssid,this.methodEl.value=this.networks[e].pairs[0].method)}renderConfigDetails(){var e=this.configListEl.selectedIndex;this.ssidEl.value="",this.accesspointEl.innerHTML="",this.hiddenEl.innerHTML="",this.methodEl.value="",this.passwordEl.value="",e<0||0===this.configs.length||(this.ssidEl.value=this.configs[e].ssid,this.accesspointEl.innerHTML=!0===this.configs[e].accesspoint?"Access Point":"Client",this.hiddenEl.innerHTML=!0===this.configs[e].hidden?"True":"False",this.methodEl.value=this.configs[e].type,this.passwordEl.value=void 0!==this.configs[e].psk?this.configs[e].psk:"")}toggleConnectDisconnect(){""!==this.connected?this.disconnect():this.connect()}saveConfig(){var e=this,t=(this.configListEl.selectedIndex,{ssid:this.ssidEl.value,accesspoint:!1});""!==this.passwordEl.value&&(t.psk=this.passwordEl.value),t.type=this.methodEl.value;const n={method:"PUT",path:`${this.callsign}/Config`,config:t},i={plugin:this.callsign,method:`config@${t.ssid}`,params:t};this.api.req(n,i).then(t=>{this.statusMessage(`Saved config for ${this.ssidEl.value}`),e.getConfigs()})}deleteConfig(){var e=this.configListEl.selectedIndex;this.statusMessage(`Deleting config ${this.configs[e].ssid}`);const t={method:"PUT",path:`${this.callsign}/Delete/${this.configs[e].ssid}`},n={plugin:this.callsign,method:"delete",params:{ssid:this.configs[e].ssid}};this.api.req(t,n).then(()=>{this.connecting=!0,this.getConfigs()})}requestDHCP(){this.statusMessage("Requesting DHCP for wlan0");const e={method:"PUT",path:`NetworkControl/${this.wlanInterface}/Request`},t={plugin:"NetworkControl",method:"request",params:{device:this.wlanInterface}};this.api.req(e,t)}storeConfig(){this.statusMessage("Storing WiFi configuration");const e={method:"PUT",path:`${this.callsign}/${this.wlanInterface}/Store`},t={plugin:this.callsign,method:"store"};this.api.req(e,t)}connect(){var e=this.configListEl.selectedIndex;this.statusMessage(`Connecting to ${this.configs[e].ssid}`);const t={method:"PUT",path:`${this.callsign}/Connect/${this.configs[e].ssid}`},n={plugin:this.callsign,method:"connect",params:{ssid:this.configs[e].ssid}};this.api.req(t,n).then(()=>{this.connecting=!0,setTimeout(this.requestDHCP.bind(this),5e3)})}disconnect(){if(void 0===this.connected||""===this.connected)return;const e={method:"DELETE",path:`${this.callsign}/Connect/${this.connected}`},t={plugin:this.callsign,method:"disconnect",params:{ssid:this.connected}};this.statusMessage(`Disconnecting from ${this.connected}`),this.api.req(e,t)}close(){this.rendered=!1,this.wifiConnectionListener&&"function"==typeof this.wifiConnectionListener.dispose&&this.wifiConnectionListener.dispose(),this.wifiScanListener&&"function"==typeof this.wifiScanListener.dispose&&this.wifiScanListener.dispose()}}},C={},R=void 0,N=(document.getElementById("main"),window.localStorage.getItem("lastActivePlugin")||void 0);function H(e){(R=new x(e)).getControllerPlugins().then(e=>e).then(e=>{for(var t=0;t<e.length;t++){var n=e[t].callsign,i=e[t].classname;M[i]?C[n]=new M[i](e[t],R):console.log(n+"( "+i+") not found")}C.footer=new k(C.DeviceInfo,R),C.menu=new w(C,R),C.menu.render(void 0!==N?N:E.startPlugin),C.notifications=new I(R),P(void 0!==N?N:E.startPlugin)})}function P(e){void 0!==C[e]&&(void 0!==N&&void 0!==C[N]&&C[N].close(),document.getElementById("main").innerHTML="",C[e].render(),N=e,window.localStorage.setItem("lastActivePlugin",e))}},function(e,t,n){"use strict";n.r(t),function(e){n(6),n(8);var t=n(3),i=n(2);Object(t.b)(e.env.HOST||Object(i.a)())}.call(this,n(5))},function(e,t){var n,i,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function d(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(e){i=l}}();var r,a=[],c=!1,h=-1;function u(){c&&r&&(c=!1,r.length?a=r.concat(a):h=-1,a.length&&g())}function g(){if(!c){var e=d(u);c=!0;for(var t=a.length;t;){for(r=a,a=[];++h<t;)r&&r[h].run();h=-1,t=a.length}r=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new p(e,t)),1!==a.length||c||d(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){var i=n(0),s=n(7);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1},l=(i(s,o),s.locals?s.locals:{});e.exports=l},function(e,t,n){(t=n(1)(!1)).push([e.i,"/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nbody,\nhtml {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    background: #2b2b2b;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    position: relative;\n    -webkit-font-smoothing: antialiased;\n    font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n    overflow: hidden;\n\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n}\n\n.main {\n    max-width: 959px;\n    max-height: calc(100% - 80px);\n    position: relative;\n    overflow-y: scroll;\n    margin: 0 auto;\n    border-left: 1px solid rgba(255,255,255,0.1);\n}\n\n.header {\n    max-width: 100%;\n    margin: 0 auto;\n    min-height: 60px;\n    position: relative;\n    border-bottom: 1px solid rgba(255,255,255,0.1);\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -o-user-select: none;\n    user-select: none;\n    z-index: 1000;\n    background-color: rgba(0,0,0,0.1);\n}\n\n.touch .header img {\n    height: 30px;\n    width: 30px;\n\n    position: absolute;\n    left: 50%;\n    margin-left: -15px;\n    top: 50%;\n    margin-top: -15px;\n}\n\n.top .fa {\n    display: inline-block;\n    line-height: 60px;\n    color: rgba(255,255,255,0.4);\n    font-size: 26px;\n    text-align: center;\n    padding: 0 20px;\n\n    -webkit-transition: color 0.15s ease-in-out, background 0.2s ease-in-out;\n    -moz-transition: color 0.15s ease-in-out, background 0.2s ease-in-out;\n    -ms-transition: color 0.15s ease-in-out, background 0.2s ease-in-out;\n    -o-transition: color 0.15s ease-in-out, background 0.2s ease-in-out;\n\n    width: 30px;\n}\n\n.top .fa:hover {\n    color: rgba(255,255,255,1);\n    cursor: pointer;\n}\n\n.top .right {\n    float: right;\n}\n\n.touch .navigation {\n    position: absolute;\n    background-color: #272727;\n    border-right: 1px solid rgba(255,255,255,0.1);\n    border-bottom: 1px solid rgba(255,255,255,0.1);\n    z-index: 999;\n    left: -600px;\n    top: 60px;\n    height: auto;\n    -webkit-transition: left 0.2s ease-in-out;\n    -moz-transition: left 0.2s ease-in-out;\n    -o-transition: left 0.2s ease-in-out;\n    -ms-transition: left 0.2s ease-in-out;\n    transition: left 0.2s ease-in-out;\n}\n\n.navigation ul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    -webkit-user-select: none; /* Chrome/Safari */\n    -moz-user-select: none; /* Firefox */\n    -ms-user-select: none; /* IE10+ */\n    -o-user-select: none;\n    user-select: none;\n    overflow: scroll;\n}\n\n.navigation ul li {\n    display: block;\n    padding: 15px;\n    text-decoration: none;\n    font-size: 16px;\n    color: rgba(255, 255, 255, 0.5);\n    width: 170px;\n    transition: color 0.15s ease-in-out;\n    -moz-transition: color 0.15s ease-in-out;\n    -webkit-transition: color 0.15s ease-in-out;\n    cursor: pointer;\n}\n\n.navigation ul li:hover {\n    color: rgba(255,255,255,1);\n}\n\n.navigation ul li.active:hover,\n.navigation ul li.active {\n    color: rgba(255,255,255,1);\n}\n\n.content {\n    padding: 10px 10px 30px 10px;\n    display: none;\n    height: 100%;\n    min-height: 365px;\n\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n}\n\n.show {\n    display: block;\n}\n\n.title {\n    color: #ffffff;\n    font-size: 18px;\n    line-height: 50px;\n    font-weight: 600;\n    margin-top: 10px;\n\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n}\n\n.label {\n    color: rgba(255, 255, 255, 0.5);\n    /*color: #7e87a5;*/\n    font-size: 16px;\n    line-height: 50px;\n\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n}\n\n.text {\n    color: #fff;\n    font-size: 16px;\n    line-height: 50px;\n\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n}\n\n.text ul {\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n}\n\n.text ul li {\n    padding: 0 10px;\n}\n\ninput:not([type=radio]):not([type=checkbox]) {\n    width: 60%;\n    height: 30px;\n    border: 1px solid #ffffff;\n    background: #ffffff;\n    color: #383c4a;\n    padding: 0 10px;\n    font-size: 16px;\n    outline: none;\n\n    -webkit-appearance: none;\n    -webkit-border-radius: 0;\n\n    -webkit-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n    -moz-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n    -ms-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n    -o-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n}\n\ninput[type=range] {\n    -webkit-appearance: none;\n    width: calc(60% + 10px)!important;\n    height: 25px;\n    background: #d3d3d3;\n    outline: none;\n    padding: 0 5px!important;\n    margin: 0;\n}\n\ninput[type=range]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 15px;\n    height: 25px;\n    background: #2b2b2b;\n    cursor: pointer;\n}\n\ninput[type=range]::-moz-range-thumb {\n    width: 15px;\n    height: 25px;\n    background: #2b2b2b;\n    cursor: pointer;\n}\n\ninput:focus, textarea:focus {\n    border: 1px solid rgba(255,255,255,0.4);\n    background: #d0d6ed;\n}\n\nselect {\n    width: 83.2%;\n    height: 30px;\n    border: 1px solid #ffffff;\n    color: #383c4a;\n    font-size: 16px;\n    padding: 0 10px;\n    outline: none;\n\n    background-color: #fff;\n\n    -webkit-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n    -moz-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n    -ms-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n    -o-transition: border 0.2s ease-in-out, background 0.2s ease-in-out;\n\n    -webkit-appearance: none;\n    -webkit-border-radius: 0;\n\n    background-position: right 50%;\n    background-repeat: no-repeat;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDZFNDEwNjlGNzFEMTFFMkJEQ0VDRTM1N0RCMzMyMkIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDZFNDEwNkFGNzFEMTFFMkJEQ0VDRTM1N0RCMzMyMkIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NkU0MTA2N0Y3MUQxMUUyQkRDRUNFMzU3REIzMzIyQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NkU0MTA2OEY3MUQxMUUyQkRDRUNFMzU3REIzMzIyQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuGsgwQAAAA5SURBVHjaYvz//z8DOYCJgUxAf42MQIzTk0D/M+KzkRGPoQSdykiKJrBGpOhgJFYTWNEIiEeAAAMAzNENEOH+do8AAAAASUVORK5CYII=);\n\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n}\n\nselect:focus, textarea:focus {\n    border: 1px solid rgba(255,255,255,0.4);\n    background-color: #d0d6ed;\n}\n\n.suspend {\n    width: 80px;\n    height: 27px;\n    border: none;\n    background-color: rgba(255, 255, 255, 0.7);\n    margin: 11px 4px 0 25px;\n    font-size: 14px;\n    font-family: 'Mukta', sans-serif;\n    color: #2b2b2b;\n    cursor: pointer;\n    border-radius: 4px;\n    transition: background-color 0.15s ease-in-out;\n    -moz-transition: background-color 0.15s ease-in-out;\n    -webkit-transition: background-color 0.15s ease-in-out;\n    position: relative;\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n    display: inline-block;\n    vertical-align: top;\n    cursor: pointer;\n}\n\n.suspend:hover {\n    background-color: rgba(255, 255, 255, 0.9);\n}\n\n.hide-suspend {\n    display: none;\n}\n\n.suspend label {\n    display: block;\n    width: 80px;\n    line-height: 28px;\n    text-align: center;\n    -webkit-border-radius: 50px;\n    -moz-border-radius: 50px;\n    border-radius: 50px;\n    cursor: pointer;\n    position: absolute;\n    font-size: 12px;\n    color: #2b2b2b;\n    text-transform: uppercase;\n}\n\n.touch #statusBar {\n    display: none;\n}\n\n.touch #notifications {\n    display: none;\n}\n\n#statusBar {\n    position: absolute;\n    right: 30px;\n    bottom: 30px;\n    padding: 0;\n    background-color: #222222;\n}\n\n#statusBar .close {\n    position: absolute;\n    right: 5px;\n    top: -25px;\n    color: rgba(255, 255, 255, 0.4);\n    text-decoration: none;\n    transition: color 0.15s ease-in-out;\n    -moz-transition: color 0.15s ease-in-out;\n    -webkit-transition: color 0.15s ease-in-out;\n}\n\n#statusBar .close:hover {\n    color: rgba(255, 255, 255, 1);\n}\n\n#statusBar .status {\n    margin: 0 5px;\n    font-size: 14px;\n}\n\n#statusBar .status label {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.4);\n    width: 120px;\n    padding: 5px 0;\n}\n\n#statusBar .status span {\n    color: rgba(255, 255, 255, 1);\n    padding: 5px 0 10px 0;\n    display: inline-block;\n}\n\n#notifications-block {\n    display: none;\n    position: absolute;\n    right: 30px;\n    bottom: 300px;\n}\n\n#notifications {\n    padding: 0;\n    width: 458px;\n    max-height: 200px;\n    overflow-y: scroll;\n    background-color: #222222;\n    font-size: 14px;\n}\n\n#notifications .red label,\n#notifications .red span {\n    color: red!important;\n}\n\n#notifications label {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.4);\n    width: 120px;\n    padding: 5px 0;\n    margin-left: 5px;\n    vertical-align: top;\n    font-style: italic;\n}\n\n#notifications span {\n    color: rgba(255, 255, 255, 1);\n    padding: 5px 0 10px 0;\n    display: inline-block;\n    margin-right: 10px;\n    max-width: 300px;\n}\n\n#keyboard {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    background: #272727;\n    width: 100%;\n    z-index: 1000;\n\n    -webkit-box-shadow: 0 0 20px 0 rgba(0,0,0,0.4);\n    -moz-box-shadow: 0 0 20px 0 rgba(0,0,0,0.4);\n    box-shadow: 0 0 20px 0 rgba(0,0,0,0.4);\n\n    -webkit-transition: all 0.2s ease-in-out;\n    -moz-transition: all 0.2s ease-in-out;\n    -o-transition: all 0.2s ease-in-out;\n    -ms-transition: all 0.2s ease-in-out;\n    transition: all 0.2s ease-in-out;\n\n    -webkit-user-select: none; /* Chrome/Safari */\n    -moz-user-select: none; /* Firefox */\n    -ms-user-select: none; /* IE10+ */\n    -o-user-select: none;\n    user-select: none;\n}\n\n#keyboard .button {\n    color: #777;\n    display: inline-block;\n    background: rgba(0,0,0,0.2);\n    border-radius: 4px;\n    -moz-border-radius: 4px;\n    -webkit-border-radius: 4px;\n    box-sizing: border-box;\n    border-top: 1px solid rgba(0,0,0,0.3);\n    height: 41px;\n    margin: 7px 8px;\n    padding-top: 11px;\n    text-align: center;\n    text-decoration: none;\n    width: 44px;\n    font-size: 14px;\n\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n}\n\n#keyboard .blue {\n    color: #272727;\n    background: rgba(255,255,255,1);\n    border-top: 1px solid rgba(255,255,255,0.8);\n}\n\n#keyboard .double {\n    width: 108px;\n}\n\n#keyboard-inner {\n    padding: 20px 0;\n    max-width: 705px;\n    margin: 0 auto;\n}\n\n#disconnected {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: -600px;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0.4);\n    z-index: 9999;\n    display: none;\n}\n\n#disconnectedBlock {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -30px;\n    margin-left: -150px;\n    width: 300px;\n    height: 60px;\n    color: #ffffff;\n    text-align: center;\n    font-size: 18px;\n    line-height: 30px;\n}\n\n.loading:after {\n    overflow: hidden;\n    display: inline-block;\n    vertical-align: bottom;\n    -webkit-animation: ellipsis steps(4,end) 1500ms infinite;\n    animation: ellipsis steps(4,end) 1500ms infinite;\n    content: \"\\2026\";\n    width: 0;\n}\n\n@keyframes ellipsis {\n    to {\n        width: 1.25em;\n    }\n}\n\n@-webkit-keyframes ellipsis {\n    to {\n        width: 1.25em;\n    }\n}\n\nspan#pause-button {\n    position: absolute;\n    cursor: pointer;\n    font-size: 14px;\n    color: rgba(255, 255, 255, 0.4);\n    right: 10px;\n    top: -25px;\n    width: 100px;\n    text-align: right;\n    transition: color 0.15s ease-in-out;\n    -moz-transition: color 0.15s ease-in-out;\n    -webkit-transition: color 0.15s ease-in-out;\n}\n\nspan#pause-button:hover {\n    color: #ffffff;\n}\n\ndiv#hide-notifications {\n    position: absolute;\n    cursor: pointer;\n    font-size: 14px;\n    color: rgba(255, 255, 255, 0.4);\n    right: 10px;\n    top: -25px;\n    width: 100px;\n    text-align: right;\n    transition: color 0.15s ease-in-out;\n    -moz-transition: color 0.15s ease-in-out;\n    -webkit-transition: color 0.15s ease-in-out;\n}\n\ndiv#hide-notifications:hover {\n    color: #ffffff;\n}\n\n.desktop .top {\n    max-width: 100%;\n}\n\n.desktop #notifications-block,\n.desktop #statusBar {\n    max-width: 100%;\n}\n\n.desktop .main {\n    height: 100%;\n    max-width: 100%;\n    margin-left: 240px;\n    padding: 0 0 20px 0;\n}\n\n.desktop #button-left {\n    display: none;\n}\n\n.desktop .navigation {\n    position: absolute;\n    z-index: 999;\n    top: 60px;\n    overflow: hidden;\n    height: 100%;\n    background-color: rgba(0,0,0,0.1);\n    padding: 10px 20px 20px 20px;\n}\n\n.desktop .main {\n    display: inline-block;\n    vertical-align: top;\n    width: calc(100% - 240px);\n    padding: 0 0 20px 0;\n}\n\n.desktop .header img {\n    height: 30px;\n    width: 30px;\n    margin-top: 15px;\n    margin-left: 35px;\n    margin-bottom: 10px;\n}\n\n@media screen and (min-width: 960px) {\n    .desktop .navigation ul {\n        height: calc(100% - 60px);\n        overflow-y: scroll;\n    }\n}\n\n@media screen and (max-width: 960px) {\n    .desktop .header img {\n        height: 30px;\n        width: 30px;\n\n        position: absolute;\n        left: 50%;\n        margin-left: -15px;\n        top: 50%;\n        margin-top: -15px;\n    }\n\n    .desktop #button-left {\n        display: inline-block;\n    }\n\n    .desktop .navigation {\n        position: absolute;\n        background-color: #272727;\n        border-right: 1px solid rgba(255,255,255,0.1);\n        border-bottom: 1px solid rgba(255,255,255,0.1);\n        z-index: 999;\n        left: -600px;\n        top: 60px;\n        height: auto;\n        -webkit-transition: left 0.2s ease-in-out;\n        -moz-transition: left 0.2s ease-in-out;\n        -o-transition: left 0.2s ease-in-out;\n        -ms-transition: left 0.2s ease-in-out;\n        transition: left 0.2s ease-in-out;\n    }\n\n    .desktop #notifications-block,\n    .desktop #statusBar,\n    .desktop .main {\n        max-width: 100%;\n        margin-left: 0;\n        padding: 0 0 20px 0;\n    }\n\n    .desktop .main {\n        display: inline-block;\n        vertical-align: top;\n        width: 100%;\n        padding: 0 0 20px 0;\n    }\n}\n\n#snapshotOutput {\n    width: 100%;\n}\n\n#shellHeader {\n    margin: 20px 20px 0 20px;\n    padding: 10px;\n    background-color: #f1f1f1;\n    color: #0b0c12;\n}\n\n#webShellInput {\n    background-color: #0b0c12;\n    border: none;\n    color: #ffffff;\n    width: calc(100% - 72px);\n    font-family: 'Inconsolata', monospace;\n    font-size: 13px;\n    padding: 0 0 10px 0;\n}\n\n#shell {\n    overflow: scroll;\n    min-height: 300px;\n    max-height: 300px;\n    background-color: #0b0c12;\n    margin: 0 20px;\n    position: relative;\n    padding: 10px 0 0 0;\n}\n\n#webShellData {\n    font-size: 13px;\n    line-height: normal;\n    position: absolute;\n    bottom: 0;\n    max-height: calc(100% + 10px);\n    font-family: 'Inconsolata', monospace;\n    margin: 0 0 -20px 20px;\n    padding-top: 10px;\n}\n\n#hashtag {\n    background-color: #0b0c12;\n    display: inline-block;\n    line-height: 30px;\n    color: #ffffff;\n    padding: 0 5px 10px 20px;\n    margin-left: 20px;\n    font-size: 13px;\n    font-family: 'Inconsolata', monospace;\n}\n\n@media screen and (max-width: 710px) {\n    #keyboard .button {\n        display: none;\n    }\n\n    #keyboard .blue {\n        display: inline-block;\n    }\n\n    #notifications-block,\n    #statusBar {\n        display: none!important;\n    }\n}\n\n::-webkit-scrollbar {\n    display: none;\n}\n\nbutton {\n    border: none;\n    background-color: rgba(255, 255, 255, 0.7);\n    margin: 2px 4px 2px 10px;\n    font-size: 12px;\n    font-family: 'Mukta', sans-serif;\n    color: #2b2b2b;\n    cursor: pointer;\n    border-radius: 4px;\n    padding: 6px 15px;\n    transition: background-color 0.15s ease-in-out;\n    -moz-transition: background-color 0.15s ease-in-out;\n    -webkit-transition: background-color 0.15s ease-in-out;\n}\n\nbutton:first-child {\n    margin: 2px 4px 2px 0;\n}\n\nbutton:hover {\n    background-color: rgba(255, 255, 255, 0.9);\n}\n\nbutton:focus {\n    outline-color: transparent;\n    outline-style: none;\n}\n\nbutton:disabled{\n    border: 1px solid #999999;\n    background-color: #cccccc;\n    color: #666666;\n}\n\n.checkbox {\n    position: relative;\n    display: inline-block;\n    margin: 12px 0;\n}\n\ninput[type=checkbox] {\n    display: none;\n}\n\n.checkbox input:checked + label:after {\n    background-color: #ffffff;\n    transform: translate(150%, 0);\n}\n\n.checkbox label {\n    display: block;\n    width: 50px;\n    height: 20px;\n    border-radius: 20px;\n    position: relative;\n    cursor: pointer;\n    transition: transform 0.15s ease-in-out, background-color 0.15s ease-in-out;\n    -moz-transition: transform 0.15s ease-in-out, background-color 0.15s ease-in-out;\n    -webkit-transition: transform 0.15s ease-in-out, background-color 0.15s ease-in-out;\n    background-color: rgba(0,0,0,0.2);\n    border: 2px solid rgba(255,255,255,0);\n    box-shadow: 0 0 1px 0 rgba(255,255,255,0.2);\n    -moz-box-shadow: 0 0 1px 0 rgba(255,255,255,0.2);\n    webkit-box-shadow: 0 0 1px 0 rgba(255,255,255,0.2);\n}\n\n.checkbox label:after {\n    content: \"\";\n    display: block;\n    width: 20px;\n    height: 20px;\n    border-radius: 20px;\n    background: #2b2b2b;\n    transition: transform 0.15s ease-in-out, background-color 0.15s ease-in-out;\n    -moz-transition: transform 0.15s ease-in-out, background-color 0.15s ease-in-out;\n    -webkit-transition: transform 0.15s ease-in-out, background-color 0.15s ease-in-out;\n}\n",""]),e.exports=t},function(e,t,n){var i=n(0),s=n(9);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1},l=(i(s,o),s.locals?s.locals:{});e.exports=l},function(e,t,n){(t=n(1)(!1)).push([e.i,'/*\n * If not stated otherwise in this file or this component\'s LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n@charset "UTF-8";\n\n.grid {\n    list-style: none; }\n\n.grid__col--2-of-2, .grid__col--3-of-3, .grid__col--4-of-4, .grid__col--5-of-5, .grid__col--6-of-6, .grid__col--8-of-8, .grid__col--12-of-12 {\n    width: 100%; }\n\n.grid__col--1-of-2, .grid__col--2-of-4, .grid__col--3-of-6, .grid__col--4-of-8, .grid__col--6-of-12 {\n    width: 50%; }\n\n.grid__col--1-of-3, .grid__col--2-of-6, .grid__col--4-of-12 {\n    width: 33.33333%; }\n\n.grid__col--2-of-3, .grid__col--4-of-6, .grid__col--8-of-12 {\n    width: 66.66667%; }\n\n.grid__col--1-of-4, .grid__col--2-of-8, .grid__col--3-of-12 {\n    width: 25%; }\n\n.grid__col--3-of-4, .grid__col--6-of-8, .grid__col--9-of-12 {\n    width: 75%; }\n\n.grid__col--push-2-of-2, .grid__col--push-3-of-3, .grid__col--push-4-of-4, .grid__col--push-5-of-5, .grid__col--push-6-of-6, .grid__col--push-8-of-8, .grid__col--push-12-of-12 {\n    margin-left: 100%; }\n\n.grid__col--push-1-of-2, .grid__col--push-2-of-4, .grid__col--push-3-of-6, .grid__col--push-4-of-8, .grid__col--push-6-of-12 {\n    margin-left: 50%; }\n\n.grid__col--push-1-of-3, .grid__col--push-2-of-6, .grid__col--push-4-of-12 {\n    margin-left: 33.33333%; }\n\n.grid__col--push-2-of-3, .grid__col--push-4-of-6, .grid__col--push-8-of-12 {\n    margin-left: 66.66667%; }\n\n.grid__col--push-1-of-4, .grid__col--push-2-of-8, .grid__col--push-3-of-12 {\n    margin-left: 25%; }\n\n.grid__col--push-3-of-4, .grid__col--push-6-of-8, .grid__col--push-9-of-12 {\n    margin-left: 75%; }\n\n.grid__col--pull-2-of-2, .grid__col--pull-3-of-3, .grid__col--pull-4-of-4, .grid__col--pull-5-of-5, .grid__col--pull-6-of-6, .grid__col--pull-8-of-8, .grid__col--pull-12-of-12 {\n    margin-left: -100%; }\n\n.grid__col--pull-1-of-2, .grid__col--pull-2-of-4, .grid__col--pull-3-of-6, .grid__col--pull-4-of-8, .grid__col--pull-6-of-12 {\n    margin-left: -50%; }\n\n.grid__col--pull-1-of-3, .grid__col--pull-2-of-6, .grid__col--pull-4-of-12 {\n    margin-left: -33.33333%; }\n\n.grid__col--pull-2-of-3, .grid__col--pull-4-of-6, .grid__col--pull-8-of-12 {\n    margin-left: -66.66667%; }\n\n.grid__col--pull-1-of-4, .grid__col--pull-2-of-8, .grid__col--pull-3-of-12 {\n    margin-left: -25%; }\n\n.grid__col--pull-3-of-4, .grid__col--pull-6-of-8, .grid__col--pull-9-of-12 {\n    margin-left: -75%; }\n\n.grid__col--1-of-5 {\n    width: 20%; }\n\n.grid__col--push-1-of-5 {\n    margin-left: 20%; }\n\n.grid__col--pull-1-of-5 {\n    margin-left: -20%; }\n\n.grid__col--2-of-5 {\n    width: 40%; }\n\n.grid__col--push-2-of-5 {\n    margin-left: 40%; }\n\n.grid__col--pull-2-of-5 {\n    margin-left: -40%; }\n\n.grid__col--3-of-5 {\n    width: 60%; }\n\n.grid__col--push-3-of-5 {\n    margin-left: 60%; }\n\n.grid__col--pull-3-of-5 {\n    margin-left: -60%; }\n\n.grid__col--4-of-5 {\n    width: 80%; }\n\n.grid__col--push-4-of-5 {\n    margin-left: 80%; }\n\n.grid__col--pull-4-of-5 {\n    margin-left: -80%; }\n\n.grid__col--1-of-6 {\n    width: 16.66667%; }\n\n.grid__col--push-1-of-6 {\n    margin-left: 16.66667%; }\n\n.grid__col--pull-1-of-6 {\n    margin-left: -16.66667%; }\n\n.grid__col--5-of-6 {\n    width: 83.33333%; }\n\n.grid__col--push-5-of-6 {\n    margin-left: 83.33333%; }\n\n.grid__col--pull-5-of-6 {\n    margin-left: -83.33333%; }\n\n.grid__col--1-of-8 {\n    width: 12.5%; }\n\n.grid__col--push-1-of-8 {\n    margin-left: 12.5%; }\n\n.grid__col--pull-1-of-8 {\n    margin-left: -12.5%; }\n\n.grid__col--3-of-8 {\n    width: 37.5%; }\n\n.grid__col--push-3-of-8 {\n    margin-left: 37.5%; }\n\n.grid__col--pull-3-of-8 {\n    margin-left: -37.5%; }\n\n.grid__col--5-of-8 {\n    width: 62.5%; }\n\n.grid__col--push-5-of-8 {\n    margin-left: 62.5%; }\n\n.grid__col--pull-5-of-8 {\n    margin-left: -62.5%; }\n\n.grid__col--7-of-8 {\n    width: 87.5%; }\n\n.grid__col--push-7-of-8 {\n    margin-left: 87.5%; }\n\n.grid__col--pull-7-of-8 {\n    margin-left: -87.5%; }\n\n.grid__col--1-of-12 {\n    width: 8.33333%; }\n\n.grid__col--push-1-of-12 {\n    margin-left: 8.33333%; }\n\n.grid__col--pull-1-of-12 {\n    margin-left: -8.33333%; }\n\n.grid__col--2-of-12 {\n    width: 16.66667%; }\n\n.grid__col--push-2-of-12 {\n    margin-left: 16.66667%; }\n\n.grid__col--pull-2-of-12 {\n    margin-left: -16.66667%; }\n\n.grid__col--5-of-12 {\n    width: 41.66667%; }\n\n.grid__col--push-5-of-12 {\n    margin-left: 41.66667%; }\n\n.grid__col--pull-5-of-12 {\n    margin-left: -41.66667%; }\n\n.grid__col--7-of-12 {\n    width: 58.33333%; }\n\n.grid__col--push-7-of-12 {\n    margin-left: 58.33333%; }\n\n.grid__col--pull-7-of-12 {\n    margin-left: -58.33333%; }\n\n.grid__col--10-of-12 {\n    width: 83.33333%; }\n\n.grid__col--push-10-of-12 {\n    margin-left: 83.33333%; }\n\n.grid__col--pull-10-of-12 {\n    margin-left: -83.33333%; }\n\n.grid__col--11-of-12 {\n    width: 91.66667%; }\n\n.grid__col--push-11-of-12 {\n    margin-left: 91.66667%; }\n\n.grid__col--pull-11-of-12 {\n    margin-left: -91.66667%; }\n\n.grid__col {\n    box-sizing: border-box;\n    display: inline-block;\n    margin-right: -.25em;\n    min-height: 1px;\n    padding-left: 20px;\n    vertical-align: top; }\n@media (max-width: 600px) {\n    .grid__col {\n        display: block;\n        margin-left: 0;\n        margin-right: 0;\n        width: auto; } }\n@media (max-width: 600px) and (min-width: 480px) {\n    .grid__col[class*="grid__col--m-"] {\n        display: inline-block;\n        margin-right: -.24em; }\n    .grid__col.grid__col--m-1-of-2, .grid__col.grid__col--m-2-of-4 {\n        width: 50%; }\n    .grid__col.grid__col--m-1-of-3 {\n        width: 33.33333%; }\n    .grid__col.grid__col--m-2-of-3 {\n        width: 66.66667%; }\n    .grid__col.grid__col--m-1-of-4 {\n        width: 25%; }\n    .grid__col.grid__col--m-3-of-4 {\n        width: 75%; } }\n@media (max-width: 480px) {\n    .grid__col[class*="grid__col--s-"] {\n        display: inline-block;\n        margin-right: -.24em; }\n    .grid__col.grid__col--s-1-of-2, .grid__col.grid__col--s-2-of-4 {\n        width: 50%; }\n    .grid__col.grid__col--s-1-of-3 {\n        width: 33.33333%; }\n    .grid__col.grid__col--s-2-of-3 {\n        width: 66.66667%; }\n    .grid__col.grid__col--s-1-of-4 {\n        width: 25%; }\n    .grid__col.grid__col--s-3-of-4 {\n        width: 75%; } }\n\n.grid__col--centered {\n    display: block;\n    margin-left: auto;\n    margin-right: auto; }\n\n.grid__col--d-first {\n    float: left; }\n\n.grid__col--d-last {\n    float: right; }\n\n.grid--no-gutter {\n    margin-left: 0;\n    width: 100%; }\n.grid--no-gutter .grid__col {\n\n    padding-left: 0; }\n.grid--no-gutter .grid__col--span-all {\n    margin-left: 0;\n    width: 100%; }\n\n.grid__col--ab {\n    vertical-align: bottom; }\n\n.grid__col--am {\n    vertical-align: middle; }\n',""]),e.exports=t}]);